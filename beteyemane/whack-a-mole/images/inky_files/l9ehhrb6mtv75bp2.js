!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=58)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(n(1)),a=o(n(12));function o(e){return e&&e.__esModule?e:{default:e}}var s=window.$igniter_var||window.$petametricsVar||window.$petametrics_var;t.default={trial:!1,trackingWord:"donottrack",extensionOff:!1,disabledCust:{"3ra9ebvgp1gnl9gu":!0,jo34k2op9eztyzj1:!0,llbf18lltc4upsf8:!0,"3f2nr8ipir0923el":!0,gn0ee46lqa6l86dv:!0,j8vr8s11slka1e3d:!0,u7nof0s7krrqfgav:!0,ih1aak4h3agrsu97:!0},debug:!1,showLiveWarnings:!0,eventTriggers:{},activity:{activityServer:"//query.petametrics.com",activitySamplingPercent:100,itemRegex:void 0,excludeRegex:void 0,includeBrowsingHistory:!1,canonicalUrlTransform:function(e){return e},urlTransform:function(e){return e}},useCanonicalUrl:!0,googleAnalytics:{globalFunction:void 0,trackerName:void 0,includeEvents:void 0,markEventsAsNonInteraction:void 0},globalTracking:!0,disableCustomWidget:!1,claimedGid:i.default.notABot()&&i.default.notOptOut()?a.default.randomStringGid(20):"donottrack",useThirdParty:!1,botRegex:/bot|crawler|spider|pycurl|larbin|findlinks|ia_archiver|htdig|slurp|HeadlessChrome/i,knownThirdPartyRegex:/webcache.googleusercontent.com|translate.googleusercontent.com|www.translatoruser.net|translate.baiducontent.com|babelserver.org|jsfiddle.net|fiddle.jshell.net|cc.bingj.com|translate.ru/,knownBadActorRegex:void 0,postQuery:!1,noTag:!1,limitHistory:!1,sdk:{queryServer:"//query.petametrics.com",backupQueryServer:"//query1.petametrics.com",queryApiVersion:"v3",getQueryInfo:!1,requestFields:["url","author","title","rank","thumbnail"],mandatoryRequestFields:[],arrayRequestFields:[],mandatoryArrayRequestFields:[],multiFetch:!1,multiTrack:!1,enableBackup:!0,requestFieldsAON:!1,customTrackFunc:void 0,widgetAnalysis:void 0,retry:!0,manualHist:void 0,iden:"url",historyTracking:!0,ogUrlHistory:!1,pushStateReset:!1,replaceStateReset:!1,stabilize:!1,alwaysSendWidgetResponse:!0,flipQueue:!1,callHashType:"opts",persistentQueryOptsKey:"_igpqo",persistentConfigKey:"_igpc",pushStateCallback:function(){},checkIfVisibleItemsOnlyCurrentUrl:!0,checkIfVisibleItemsIncludeCurrentUrl:!0,stripParamsWhenCheckingVisibleItems:!0,checkItemsMismatch:!0,failIfCurrentItemTracked:!1,maxVizItemsToSend:30,renderTransform:function(e){return e},timerShownLikelyDuplicate:500,timerBufferShown:0,useLocationForCurrentUrl:!1,addOnVisibleWhenTracking:!0,widgetHasVaryingLength:!1,failTrackUntilNewVisibleItemsInSpaPageReset:!1,autoRenderItemTransform:function(e){return e},transformBaseHTML:void 0,waitForATagsOnWaitForSelectAll:void 0,autoRenderCustomAbSlice:void 0,overrideShouldFetch:!1,removeCurrentUrlFromVisibleItems:!1,notifyForEmptyFetchQueue:!1,requireWidgetNameInRegister:!0,maybeOverrideSetContext:void 0,debugTrack:!1,filterAnchorsByCssSelector:function(e){return e},filterVizByCssSelector:void 0,allowTrackingWithoutAnchor:!1,checkIfScrapingDelayed:!0},clickHist:{onLocalStorage:!0,onCookie:!1,urlTrans:function(e){return e},clickHistCKey:"_igch",clickHistLKey:"_igClkHis",cap:10,send:!1},longHist:{active:!1,bufferSize:100,recentDropSize:0},trackingTransURL:function(e){return e},customContext:{id:void 0},qOpt:{dynScrollInfo:!1,screenDim:!1,sendTimer:!0},shown:{active:!1,freqCap:3,vizCap:10,maxExclude:20,bufferSize:40,vizSendCap:void 0,freqCapKey:"_fcap"},inventory:{inventoryServer:"//query.petametrics.com",inventoryApiVersion:"v1",version:void 0,collect:!0,id:"url",jsonTransform:void 0,collectJSON:!0,collectOpenGraph:!0,collectOpenGraphOnly:!0,loadExportables:!0,mandatoryOpenGraphFeatures:["title","url","type"],features:void 0,mandatoryFeatures:["title","url"],filters:[{name:"noIndex",value:"true"}],useOpenGraphForCanonicalUrl:!0,useLinkRelForCanonicalUrl:!0,defaultType:"article",stripTagsForCanonicalUrl:!0,stripHashesForCanonicalUrl:!0,canonicalUrlTransform:function(e){return e},itemRegex:void 0,excludeRegex:void 0,ttl:0,requiredDataLayer:void 0,alwaysRefreshCanonicalUrl:!1,minTimeToWaitAfterDomComplete:void 0},customTrackFunc:void 0,pmVar:s,jsKey:null,loadedAt:window[s].l,version:"0.4",cookieDomain:i.default.getTopLevelDomain(window.location.hostname),thirdKey:"_igg",permKey:"_ig",sessKey:"_igt",sessRefKey:"_igsr",userRefKey:"_igur",histKey:"_igh",longHistKey:"_ighl",robustMsgSlot:"_igslot_",pisKey:"_ig_pis",siuKey:"_ig_siu",piuKey:"_ig_piu",cisKey:"_ig_cis",ciuKey:"_ig_ciu",dpisKey:"_ig_dpis",dpiuKey:"_ig_dpiu",iriuKey:"_ig_iriu",numPerKey:"_ig_nump",numSesKey:"_ig_sess",robustUseCookie:!0,robustUseStorage:!0,latestVizKey:"_iglviz_",lastClick:"_iglclk_",widgetClickContextKey:"_igwcc_",botClassificationKey:"_igb",gid:null,uid:null,sid:null,pvid:null,hist:null,histSettings:{stripTags:!0,stripHashes:!0,stripDashes:!1,fixHttps:!1,deduplicate:!0,maxItems:10,histRegex:/(.*)/,origin:void 0,transform:function(e){return e},globalTransform:function(e){return e}},getHistList:function(){return this.sdk.manualHist?this.sdk.manualHist:this.hist?(this.hist=this.hist.split(",").join("|"),this.hist.split("|").map(function(e){return decodeURIComponent(e)})):[]},getClickHistList:function(){},overrideViClickUrlWithResponseVisibleItemsByWidgetName:null,globalCtx:{},adblockCheck:!1,adblocker:!1,userAgent:navigator.userAgent,language:navigator.language,os:navigator.platform,colorDepth:screen.colorDepth,screenHeight:screen.height,screenWidth:screen.width,currentUrl:window.location.href,referrer:document.referrer.slice(0,200),isInIframe:!1,checkElementParentIsActuallyVisible:!1,enableSendFromHeadless:!0,timers:{stuck_10s:1e4,stuck_3m:18e4},onVisibleImmediatelyAfterScroll:!0,defaultApiEvents:["pageview","stuck_10s","stuck_3m"],serverConfig:{},refresh:function(){this.referrer=this.currentUrl,this.currentUrl=window.location.href},init:function(e){for(var t in e)this.hasOwnProperty(t)&&"object"===r(this[t])&&!this[t].length?this[t]=i.default.mergeMap(this[t],e[t]):this[t]=e[t]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=g(n(16)),s=g(n(22)),l=g(n(4)),u=g(n(0)),d=g(n(3)),c=g(n(2)),f=g(n(29));function g(e){return e&&e.__esModule?e:{default:e}}var p=window;var h=!0,m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],y=m.length;for(var v in{toString:null})h=!1;function w(e){if("object"!=(void 0===e?"undefined":a(e))&&"function"!=typeof e||null===e)throw new TypeError("getObjectKeys called on a non-object");var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);if(h)for(var r=0,i=y;r<i;r++){var o=m[r];e.hasOwnProperty(o)&&t.push(o)}return t}function b(e){var t=i(e,6),n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5];switch(n){case"name":case"&":return[n,r.replace(/\./g,"__dot__"),a,o];case"text":return[n,r,a,o];case"^":case"#":return[n,r.replace(/\./g,"__dot__"),a,o,s.map(b),l];case"!":case">":case"=":return[n,r,a,o];default:return console.error('Unexpected type "'+n+'" at position '+a+"-"+o),[n,r,a,o]}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.openingTag="{{",this.closingTag="}}"}return r(e,[{key:"tokenToTemplate",value:function(e){var t=i(e,6),n=t[0],r=t[1],a=t[2],o=t[3],s=t[4];t[5];switch(n){case"name":return""+this.openingTag+r+this.closingTag;case"&":case">":case"!":return""+this.openingTag+n+r+this.closingTag;case"^":case"#":return""+this.openingTag+n+r+this.closingTag+(""+this.tokensToTemplate(s))+(this.openingTag+"/"+r+this.closingTag);case"text":return r;case"=":var l=this.openingTag+"="+r+"="+this.closingTag,u=r.split(/\s+/,2),d=i(u,2);return this.openingTag=d[0],this.closingTag=d[1],l;default:return console.error('Unexpected type "'+n+'" at position '+a+"-"+o),""+this.openingTag+n+r+this.closingTag}}},{key:"tokensToTemplate",value:function(e){var t=this;return e.map(function(e){return t.tokenToTemplate(e)}).join("")}}]),e}();t.default={waitOnSelect:function(e,t,n){var r=this,i=document.querySelector(e);return null===i?new f.default(function(e){return setTimeout(e,t)}).then(function(){return n>1?r.waitOnSelect(e,t,n-1):i}):f.default.resolve(i)},waitOnSelectAll:function(e,t,n,r){var i=this,a=document.querySelectorAll(e);return a.length<r?new f.default(function(e){return setTimeout(e,t)}).then(function(){return n>1?i.waitOnSelectAll(e,t,n-1,r):a}):f.default.resolve(a)},nullPromise:function(){return f.default.resolve(null)},generateUUID:function(){var e=s.default.getCurrentTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)})},getURLParameter:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[null,""])[1].replace(/\+/g,"%20"))||null},mergeMap:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},makeACopy:function e(t){var n;if(null==t||"object"!=(void 0===t?"undefined":a(t)))return t;if(t instanceof Date)return(n=new Date).setTime(t.getTime()),n;if(t instanceof Array){n=[];for(var r=0,i=t.length;r<i;r++)n[r]=e(t[r]);return n}if(t instanceof Element)return t.cloneNode(!0);if(t instanceof Object){for(var o in n={},t)t.hasOwnProperty(o)&&(n[o]=e(t[o]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},getUrlPath:function(e,t){var n=e.replace(/https?:\/\/[^\/]+/i,"");return t?n:n.split("?")[0].split("#")[0]},getObjectKeys:w,size:function(e){return w(e).length},getTopLevelDomain:function(e){var t=e.split(".");return"com"==t[t.length-1]?t.slice(-2).join("."):null},djb2HashCode:function(e){for(var t=5381,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)},getTime:function(){return(new Date).getTime()},getNowOrTime:function(){return window&&window.performance&&window.performance.now&&"function"==typeof window.performance.now?0|window.performance.now():this.getTime()},requestJsonp:function(e,t,n){var r="igniter_"+this.generateUUID().replace(/-/g,"");p[r]=function(t){e.apply(null,[t].concat(n||[]))};var i=t+(t.indexOf("?")>=0?"&":"?")+"jsonp="+r,a=document.createElement("script");a.type="text/javascript",a.setAttribute("src",i),document.head.appendChild(a)},notABot:function(){if(!u.default)return!0;var e=u.default.botClassificationKey&&l.default&&"1"==l.default.readCookie(u.default.botClassificationKey);return e&&!u.default.botRegex.test(u.default.userAgent)&&(u.default.userAgent=u.default.userAgent+";bot-because-blocked-before"),!u.default.botRegex.test(u.default.userAgent)&&!e},notOptOut:function(){return!u.default||l.default&&l.default.hasCookiesEnabled()&&"donottrack"!=u.default.uid&&"donottrack"!=l.default.readCookie(u.default.permKey)},isThirdPartyOrigin:function(e){return u.default.knownThirdPartyRegex&&u.default.knownThirdPartyRegex.test(e)},isBadActor:function(e){return u.default.knownBadActorRegex&&u.default.knownBadActorRegex.test(e)},getParam:function(e,t,n){if(e&&t in e&&a(e[t])==n)return e[t];console.log("LI: Invalid or missing parameter: "+t)},sendPixelAndMarkErrorMessage:function(e,t,n){d.default.send(e,this.mergeMap(n||{},{errs:t})),c.default.updateErrorMessagesByEventType(e,t)},getOrElse:function(e,t,n){return t in e?e[t]:n},hashOpts:function(e){for(var t in e)e[t]||delete e[t];return this.djb2HashCode(JSON.stringify(e))},removeURLParameter:function(e,t){var n=e.split("?");if(n.length>=2){for(var r=encodeURIComponent(t)+"=",i=n[1].split(/[&;]/g),a=i.length;a-- >0;)-1!==i[a].lastIndexOf(r,0)&&i.splice(a,1);return e=n[0]+(i.length>0?"?"+i.join("&"):"")}return e},throwScriptError:function(e,t){u.default.showLiveWarnings&&console.log((e||"")+": "+t+", full stack trace: "+t.stack);var n=(e||"")+": "+(t.stack||"");c.default.updateErrorMessagesByEventType("script_error",n),d.default.send("script_error",{errs:(e||"")+": "+t,fullErrorDetails:n})},androidVersionCheck:function(){var e=navigator.userAgent;return e.indexOf("Android")>=0?parseFloat(e.slice(e.indexOf("Android")+8)):-1},returnStringifiedOrFailure:function(e){try{return e instanceof Element?e.outerHTML:JSON.stringify(e)}catch(e){return"stringification failed, error: "+e+", stack trace: "+e.stack}},replaceDotsInTemplate:function(e){return function(e){return(new k).tokensToTemplate(e)}(o.default.parse(e).map(b))},replaceDotsInObject:function(e){var t={};for(var n in e)t[n.replace(/\./g,"__dot__")]=e[n];return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s(n(1)),a=s(n(0)),o=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}window,document;t.default={buffer:{shown:{}},invocationLog:[],tunnelLog:[],fetchCalled:!1,persistentQueryOpts:{},persistentConfig:{},fetchData:{started:!1,recsFetched:!1,finalized:!1,startTime:0,timeout:1e4,fetchQueue:[],checkpointedFetchQueues:[],checkpointedCalls:[],checkpointedRecs:[],checkpointedRetried:[],dedupQueue:{},recs:{},calls:{},dedupMax:{},retried:{},givenUp:!1,callback:void 0},eventCounts:{},tsplsByEventType:{},errorMessagesByEventType:{},warningMessagesByEventType:{},shownSourceMap:{},responseWidgetMap:{},shownWidgetMap:{},visibleWidgetMap:{},responseVisibleItemsByWidgetName:{},shownVisibleItemsByWidgetNameBeforeSpaPageReset:{},shownVisibleItemsByWidgetName:{},inventoryData:{inventoryCollectOn:!1,collectStarted:!1,scrapingStarted:!1,scrapingAborted:!1,scrapingFinished:!1,inventorySent:!1,timing:{}},startupTimes:{},duplicatesDetected:[],clickUrls:[],timing:{shownTimes:{},visibleTimes:{},clickTimes:{}},mostRecentTrackingObject:{},mostRecentTrackedAnchors:{},allowRegister:!0,xhrBroken:!1,urlListByEventType:{},refresh:function(){this.fetchData=i.default.mergeMap(this.fetchData,{dedupQueue:{}})},checkpointAndClear:function(e){try{this.fetchData.checkpointedFetchQueues.push(this.fetchData.fetchQueue),this.fetchData.checkpointedCalls.push(this.fetchData.calls),this.fetchData.checkpointedRecs.push(this.fetchData.recs),this.fetchData.checkpointedRetried.push(this.fetchData.retried)}catch(e){i.default.throwScriptError("could not checkpoint fetch queue",e)}this.fetchData.fetchQueue=[],this.fetchData.calls={},this.fetchData.recs={},this.fetchData.retried={},this.fetchData.dedupQueue={},this.fetchData.finalized=!0,"function"==typeof this.fetchData.callback&&(this.fetchData.callback(e),this.fetchData.callback=void 0)},initializeFetchVariables:function(){this.fetchData.started=!1,this.fetchData.finalized=!1,this.fetchData.givenUp=!1,this.fetchData.recsFetched=!1},updateMessagesByEventType:function(e,t,n){try{var r=window&&window.performance&&window.performance.now&&"function"==typeof window.performance.now?0|window.performance.now():void 0,i={message:t};void 0!=r&&(i.timeSincePageLoad=r),"error"==n?(this.errorMessagesByEventType[e]=this.errorMessagesByEventType[e]||[],this.errorMessagesByEventType[e].push(i)):(this.warningMessagesByEventType[e]=this.warningMessagesByEventType[e]||[],this.warningMessagesByEventType[e].push(i))}catch(r){console.log("LI: error when updating messages of severity "+n+" by event type for eventType = "+e+", message = "+t,r)}},updateErrorMessagesByEventType:function(e,t){this.updateMessagesByEventType(e,t,"error")},updateWarningMessagesByEventType:function(e,t){this.updateMessagesByEventType(e,t,"warning")},runDiagnostics:function(e){this.inventoryData.inventoryCollectOn=a.default.inventory.collect;var t=0,n=0,s=0,l=void 0,u="";function d(t){"log"==e&&console.log(t),u+=t+"\n"}function c(t,n,a){"log"==e&&console.log(t+" (object type: "+(void 0===n?"undefined":r(n))+") ",a?function(e){try{return i.default.makeACopy(e)}catch(t){return d("object copy failed, error: "+t+", stack trace: "+(t.stack||"")),e}}(n):n),u+=t+" "+i.default.returnStringifiedOrFailure(n)+"\n"}window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(l=0|window.performance.now());var f="As a result, LiftIgniter loads very late and its ability to improve recommendation quality on your site is limited. This probably means your site is slow, your Internet connection is slow, or you are not including our snippet early enough in the page.",g="If this message persists across multiple page loads, please get in touch with support@liftigniter.com to discuss solutions.";d("Diagnostics for Javascript key "+a.default.jsKey+" run at "+new Date+" ("+l+" ms after initial page load). Get full details of requests to LiftIgniter by going to the Network Panel and filtering to petametrics. Messages marked [ERROR] definitely deserve remedial action, messages marked [WARNING] deserve serious attention, and messages marked [INFO] deserve consideration. Messages marked [DEBUG] are for digging deeper into things, and can be ignored unless you have a specific reason to look at them. Keep in mind that if you have selected 'Disable Cache' in your Network Panel, then load times would be comparable to those of first-time visitors; if you have not, then load times are comparable to those of repeat visitors");try{Object.keys(this.errorMessagesByEventType).length>0?(c("[ERROR] There were errors on this page! Error messages on this page, grouped by error type",this.errorMessagesByEventType,!0),t+=Object.keys(this.errorMessagesByEventType).length):d("No errors thrown were identified in this diagnostics run!")}catch(e){c("[ERROR] Error messages on this page, grouped by error type",this.errorMessagesByEventType,!0)}try{Object.keys(this.warningMessagesByEventType).length>0&&(c("[WARNING] There were warnings generated by events on this page! Warning messages generated by events on this page, grouped by warning type",this.warningMessagesByEventType,!0),n+=Object.keys(this.warningMessagesByEventType).length)}catch(e){c("[WARNING] Warning messages generated by events on this page, grouped by warning type",this.warningMessagesByEventType,!0)}this.eventCounts.pageview&&0!=this.eventCounts.pageview||(d('[WARNING] No pageview events were sent for this page! Have you included $p("send","pageview") at the bottom of your snippet?'),n+=1),a.default.currentUrl&&this.urlListByEventType.pageview&&this.urlListByEventType.pageview[this.urlListByEventType.pageview.length-1]!==a.default.currentUrl&&d("[WARNING] The URL at the time of sending the most recent pageview event, namely, "+this.urlListByEventType.pageview[this.urlListByEventType.pageview.length-1]+", does not match the current URL: "+a.default.currentUrl+'. This is a problem only if the URL change is significant (such as in a single-page app) and you would like to trigger a pageview on such a change. You should call $p("resetPageview") on the url change if so, or use setPushStateReset'),a.default.currentUrl&&window.location.href&&a.default.currentUrl!==window.location.href&&window.location.href!==a.default.currentUrl+"?li-view-mode=console"&&d("[WARNING] The value of currentUrl stored internally, namely, "+a.default.currentUrl+", does not match the window URL "+window.location.href+'. This is a problem only if the URL change is significant (such as in a single-page app). This may mean that you should call $p("resetPageview") on URL change, or set pushStateReset to true'),!a.default.allowRapidToggling&&this.eventCounts.pageview&&this.eventCounts.pageview>1&&(d('[WARNING] Multiple pageview events were sent for this page! This is expected (and not a problem) if you are using a single-page app or infinite scroll. Otherwise, please check if you are including the snippet twice, or calling $p("send","pageview") multiple times'),n+=1),!this.fetchData.finalized||this.eventCounts.widget_shown||this.eventCounts.widget_tracking_empty_list?this.fetchData.finalized&&this.eventCounts.widget_shown&&!this.shownSourceMap.LI?(d('[WARNING] You requested recommendations but did not send a widget_shown event with source=LI. This means that either you are not calling the $p("track",... function properly, or you are calling it with the wrong source. NOTE: This warning will trigger unnecessarily if you are not using LiftIgniter\'s track function; please manually check for the source if so.'),n+=1):this.fetchData.finalized&&this.eventCounts.widget_shown&&this.eventCounts.widget_shown<(this.eventCounts.widget_response||0)&&!this.eventCounts.widget_tracking_empty_list?(d("[WARNING] The number of widgets LiftIgniter returned responses for exceeds the number of widgets tracked as shown; we have "+(this.eventCounts.widget_response||0)+" responses and "+(this.eventCounts.widget_shown||0)+" shown. This probably means you are either not rendering or not correctly tracking some of the widgets you are requesting (and being billed for). It could also mean you are grouping widgets together when rendering, which is generally not advisable. It could also mean you are rendering a widget lazily, which may not be a problem. To see which widgets you are missing, compare the response widget map and shown widget map below."),n+=1):this.fetchData.finalized&&this.shownSourceMap.LI&&(this.shownSourceMap.LI||0)<(this.eventCounts.widget_response||0)&&!this.eventCounts.widget_tracking_empty_list?(d("[WARNING] The number of widgets LiftIgniter returned responses for exceeds the number of widgets tracked as shown with source LI; we have "+(this.eventCounts.widget_response||0)+" responses and "+(this.shownSourceMap.LI||0)+" shown. This could mean either that you are failing to track those widgets correctly, or are you are tracking them with a source other than LI. To see what is happening, look at the response widget map, shown widget map, and shown source map below."),n+=1):!this.eventCounts.widget_response&&this.shownSourceMap.LI?(d("[WARNING] You are tracking recommendations as shown with source LI, but no widget responses have been recorded. This could mean that you are unintentionally tracking base slice recommendations with source LI. This is not a problem if you are requesting recommendations server-side."),n+=1):(this.eventCounts.widget_response||0)<(this.shownSourceMap.LI||0)&&(d("[WARNING] You are tracking recommendations as shown with source LI; however, the number of widgets you tracked as shown exceeds the number for which you received responses. This usually means you are tracking some recommendations with source LI that are not returned by LiftIgniter. It could also mean that you are rearranging results requested for one widget to multiple widgets. Please fix this, or contact support@liftigniter.com to discuss further"),n+=1):(d('[WARNING] You requested recommendations but did not send a widget_shown event. This probably means that you are not calling the $p("track",... function properly'),n+=1);var p=i.default.getObjectKeys(this.responseVisibleItemsByWidgetName),h=this.shownVisibleItemsByWidgetName,m=this.responseVisibleItemsByWidgetName;if(p.map(function(e){if(h[e]){var t=m[e],r=h[e];JSON.stringify(t)!=JSON.stringify(r)&&(d("[WARNING] For the widget "+e+", the visible items in the response returned by us did not match the visible items tracked as shown.\nThe visible item list for response was ("+t.length+" items): \n"+JSON.stringify(t)+"\nThe visible item list tracked as  shown was ("+r.length+" items): \n"+JSON.stringify(r)),n+=1)}else d("[WARNING] For the widget "+e+", we received a response but did not track recommendations as shown. Please check if those recommendations were shown with a different widget name"),n+=1}),this.shownSourceMap.LI&&this.shownSourceMap.base&&(d("[WARNING] You are tracking recommendations with both LI and base on the same page. While this can be done, it means that we cannot compute session-level metrics for users (as the same user is in both LI and base slices). If you have not discussed this issue with LiftIgniter, please contact support@liftigniter.com to discuss this"),n+=1),this.startupTimes.beaconLoadStartTime&&this.startupTimes.beaconLoadStartTime>3500&&(d("[WARNING] You executed the snippet to load the LiftIgniter beacon "+this.startupTimes.beaconLoadStartTime+" milliseconds after, which is more than 3.5 seconds after, the start of page load. "+f+" "+g),n+=1),this.startupTimes.beaconLoadStartTime&&this.startupTimes.initStartTime&&this.startupTimes.initStartTime-this.startupTimes.beaconLoadStartTime>1e3&&(d("[WARNING] The LiftIgniter beacon appears to have taken "+(this.startupTimes.initStartTime-this.startupTimes.beaconLoadStartTime)+" milliseconds to load, which is more than the expected maximum of 1 second. This time is measured from after the load start time, which itself occurred "+this.startupTimes.beaconLoadStartTime+" milliseconds after page load start. This could be because of a poor Internet connection or due to a large amount of bandwidth being used by your site. "+g),n+=1),this.startupTimes.initStartTime&&!this.startupTimes.beaconLoadStartTime&&this.startupTimes.initStartTime>4500&&(d("[WARNING] The LiftIgniter beacon finished loading and started initializing "+this.startupTimes.initStartTime+" milliseconds after, which is more than 4.5 seconds after, the start of page load. "+f+" "+g),n+=1),this.startupTimes.initEndTime&&this.startupTimes.initStartTime&&this.startupTimes.initEndTime-this.startupTimes.initStartTime>400&&(d("[WARNING] Initializing the JavaScript with your configurations took "+(this.startupTimes.initEndTime-this.startupTimes.initStartTime)+" milliseconds, which exceeds the threshold of 400 milliseconds. This could mean a very complex initial configuration, a slow browser or operating system, or a lot of code running on the site. "+g),n+=1),this.tsplsByEventType.pageview&&this.tsplsByEventType.pageview[0]>5e3&&!this.startupTimes.initEndTime&&(d("[WARNING] Your pageview event fired at "+this.tsplsByEventType.pageview[0]+" milliseconds after page load, which is more than 5 seconds after, the start of page load. "+f+" "+g),n+=1),this.tsplsByEventType.widget_shown&&this.tsplsByEventType.widget_shown[0]>8e3&&(d("[WARNING] Your first widget_shown event fired at "+this.tsplsByEventType.widget_shown[0]+" milliseconds after, which is more than 8 seconds after, the start of page load. This could mean a slow Internet connection, slow site, or late load of recommendations. Unless you have explicitly chosen to lazy load the recommendations, we recommend debugging the cause of the delayed load time"),n+=1),this.inventoryData&&this.inventoryData.timing&&this.inventoryData.inventoryCollectOn&&!this.inventoryData.collectStarted&&!this.errorMessagesByEventType.scraping_fail&&(d("[WARNING] Although your configuration has inventory.collect turned on, no inventory collection has started yet. This is probably because your DOM has not yet finished loading. If your DOM will finish loading in a few seconds, wait for it to finish and rerun runDiagnostics"),n+=1),this.inventoryData&&this.inventoryData.timing&&this.inventoryData.collectStarted&&!this.inventoryData.scrapingStarted&&!this.errorMessagesByEventType.scraping_fail&&(d("[WARNING] Inventory collection has started but is stuck right at the beginning, the actual scraping has not yet begun; please wait a couple seconds and rerun. "+g),n+=1),this.inventoryData&&this.inventoryData.timing&&this.inventoryData.scrapingStarted&&!this.inventoryData.scrapingFinished&&!this.inventoryData.scrapingAborted&&!this.errorMessagesByEventType.scraping_fail&&(d("[WARNING] Inventory collection has started but is stuck in the middle of scraping; please wait a couple seconds and rerun. "+g),n+=1),this.inventoryData&&this.inventoryData.scrapingAborted&&(d("[WARNING] In inventory collection, scraping was aborted. The reason for aborting scraping was: "+this.inventoryData.scrapingAbortReason+". If you have concerns about this, please contact support@liftigniter.com"),n+=1),this.inventoryData&&this.inventoryData.scrapingFinished&&!this.inventoryData.inventorySent&&(d("[WARNING] Inventory scraped but not sent. This is unusual; check after a few seconds. If the problem persists, contact support@liftigniter.com"),n+=1),this.duplicatesDetected.length>0){c("[WARNING] Duplicate events were detected (and the corresponding activities may have been blocked from being sent) for the following event types. You can see more details around the sending of these duplicates by filtering to the string LI: in console logs. Please contact support@liftigniter.com if you have more questions. The event types with duplicates are: ",this.duplicatesDetected,!0),n+=1}this.inventoryData&&this.inventoryData.scrapingFinished&&this.inventoryData.timing&&this.inventoryData.timing.scrape&&this.inventoryData.timing.scrape>1e4&&(d("[WARNING] Inventory scraping from this page finished more than 10 seconds after the start of page load. This could mean slow Internet, a slow-loading page, or a DOM that takes too long to complete. One possible implication is that for very rarely accessed pages, we may be more likely to miss getting them in our inventory because we never saw a user stick around on the page long enough. If you see this issue persist across multiple page refreshes, contact support@liftigniter.com"),n+=1),0==n&&d("No warnings were printed in this diagnostics run!"),this.fetchData&&!this.fetchData.finalized&&this.fetchData.fetchQueue&&0==this.fetchData.fetchQueue.length&&!this.eventCounts.widget_shown&&(d("[INFO] You have not requested any recommendations using the LiftIgniter SDK. Do you not want to show recommendations on this page?"),s+=1),this.fetchData&&!this.fetchData.finalized&&this.fetchData.fetchQueue&&this.fetchData.fetchQueue.length>0&&(d("[INFO] You still have some pending requests for recommendations. Wait a few seconds and rerun runDiagnostics to get more accurate diagnostics!"),n+=1),this.eventCounts.widget_shown&&!this.eventCounts.widget_visible?(d("[INFO] You have rendered recommendation widgets on the page but no visibility events have fired for any widget. Scroll to the recommendation area and rerun runDiagnostics to check that the visibility event fires (which will make this INFO message go away)"),s+=1):this.eventCounts.widget_shown&&this.eventCounts.widget_visible&&this.eventCounts.widget_visible<this.eventCounts.widget_shown&&(d("[INFO] You have rendered recommendation widgets on the page and visibility events have fired; however, visibility events have not fired for all widgets. See the shown widget map and visible widget map in the DEBUG statements below to see which widgets have not had visibility events yet. You need to scroll to the widgets to make the visibility event fire and make this INFO message go away"),s+=1),this.eventCounts.widget_visible&&!this.eventCounts.widget_click&&(d("[INFO] No click events have fired on this page. To test click events, right-click on one of the tracked recommendation areas, then rerun runDiagnostics. If successful, this INFO message will go away"),s+=1),0==s&&d("No info messages were printed in this diagnostics run!");var y={};"send"==e&&(y.fullDiagnosticsString=u),c("[DEBUG] fetchData",this.fetchData,!0),c("[DEBUG] Startup times in milliseconds from start of page load",this.startupTimes,!0),c("[DEBUG] Event counts sent on this page, grouped by event type",this.eventCounts,!0),c("[DEBUG] Time in milliseconds since page load, for all events, by type",this.tsplsByEventType,!0),c("[DEBUG] Number of widget_shown events by source (only for events created through the use of our track function): ",this.shownSourceMap,!0),c("[DEBUG] Response widget map (number of widget_response events by widget name): ",this.responseWidgetMap,!0),c("[DEBUG] Shown widget map (number of widget_shown events by widget name, only for events created through the use of our track function): ",this.shownWidgetMap,!0),c("[DEBUG] Visible widget map (number of widget_visible events by widget name, only for events created through the use of our track function): ",this.visibleWidgetMap,!0),c("[DEBUG] Response visible items by widget name: ",this.responseVisibleItemsByWidgetName,!0),c("[DEBUG] Shown visible items by widget name: ",this.shownVisibleItemsByWidgetName,!0),c("[DEBUG] Inventory data: ",this.inventoryData,!0),c("[DEBUG] Most recent tracking parameters by widget: ",this.mostRecentTrackingObject,!0),c("[DEBUG] Most recent tracked anchors by widget: ",this.mostRecentTrackedAnchors,!0),c("[DEBUG] url list by event type: ",this.urlListByEventType,!0),c("[DEBUG] persistent query opts stored in local storage: ",this.persistentQueryOpts,!0),c("[DEBUG] persistent config stored in local storage: ",this.persistentConfig,!0),window.performance&&c("[DEBUG] Performance data from browser: ",window.performance,!1),c("[DEBUG] Config: ",a.default,!0),c("[DEBUG] ServerConfig: ",a.default.serverConfig.exportable,!0),c("[DEBUG] SDK invocation log: ",this.invocationLog,!0),this.tunnelLog.length>0&&c("[DEBUG] Tunnel log: ",this.tunnelLog,!0),d(t+" errors, "+n+" warnings, "+s+" info messages printed"),d("If including this data in email to support@liftigniter.com, please include everything that was printed in the console");y={};return"send"==e&&(y.fullDiagnosticsString=u),o.default.send("runDiagnostics",y),"return"==e?u:(console.log("method is not return, so suggesting the use of return if necessary"),'To return diagnostics output as a string, use $p("runDiagnostics","return")')}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Config=__webpack_require__(0),_Config2=_interopRequireDefault(_Config),_QueryString=__webpack_require__(5),_QueryString2=_interopRequireDefault(_QueryString),_Cookies=__webpack_require__(4),_Cookies2=_interopRequireDefault(_Cookies),_Storages=__webpack_require__(7),_Storages2=_interopRequireDefault(_Storages),_Utility=__webpack_require__(1),_Utility2=_interopRequireDefault(_Utility),_State=__webpack_require__(2),_State2=_interopRequireDefault(_State),_GoogleAnalytics=__webpack_require__(23),_GoogleAnalytics2=_interopRequireDefault(_GoogleAnalytics),_Ajax=__webpack_require__(13),_Ajax2=_interopRequireDefault(_Ajax);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getUrl(e,t){var n;return n="li_act_server"in(t=t||{})?t.li_act_server:_Config2.default.activity.activityServer,"v3"==_Config2.default.sdk.queryApiVersion&&(n+="/v3/"+_Config2.default.jsKey,_Utility2.default.notABot()&&_Utility2.default.notOptOut()&&(n+="/"+encodeURIComponent(_Config2.default.uid))),n+"/__activity.gif?"+makeActivityQueryString(e,t)}function makeActivityQueryString(e,t){var n="e="+encodeURIComponent(e);if("widget_click"==e&&(_Config2.default.clickHist.onLocalStorage&&_Storages2.default.appendToClickHist(t.clickUrl,t.w,t.source),_Config2.default.clickHist.onCookie&&_Cookies2.default.appendToClickHist(t.clickUrl,t.w,t.source)),_Config2.default.shown.vizSendCap&&("widget_shown"==e||"widget_visible"==e||"widget_click"==e)&&Array.isArray(t.vi)&&(t.vi=t.vi.slice(0,_Config2.default.shown.vizSendCap)),"conversion"==e&&!t.source){var r=_Utility2.default.getURLParameter("li_source"),i=_Utility2.default.getURLParameter("li_medium");r&&(t.source=r),i&&(t.w=i)}for(var a in n+="&"+_Ajax2.default.toQueryString(_QueryString2.default.forCurrentExample()),t)t.hasOwnProperty(a)&&("[object Array]"===Object.prototype.toString.call(t[a])?n+="&"+a+"="+encodeURIComponent(JSON.stringify(t[a])):n+="&"+a+"="+encodeURIComponent(t[a]));for(var o in _Config2.default.globalCtx)_Config2.default.globalCtx.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&("[object Array]"===Object.prototype.toString.call(_Config2.default.globalCtx[o])?n+="&"+o+"="+encodeURIComponent(JSON.stringify(_Config2.default.globalCtx[o])):n+="&"+o+"="+encodeURIComponent(_Config2.default.globalCtx[o]));return n+="&sdk=bc-pixel"}function storeLatestVisibleItems(e){_Storages2.default.setItem(_Config2.default.latestVizKey,JSON.stringify(e))}function getLatestVisibleItems(){return _Storages2.default.getItem(_Config2.default.latestVizKey)}function checkIfBadActor(){return!!(window&&window.location&&window.location.origin&&""!=window.location.origin&&_Utility2.default.isBadActor(window.location.origin))}function checkForUserId(e){_Config2.default.uid||(_Config2.default.showLiveWarnings&&console.log("LI: uid is not defined for event "+e+"; Pixel.send() may not have all the info."),_State2.default.updateWarningMessagesByEventType("activity_send_warning",'LI: uid is not defined. Pixel.send() may not have all the info. This could be because you are using addEarlyExtension() instead of addExtension(), or running $p("send") (or some other $p command) before $p("init")'))}function checkForLiftIgniterHeadless(){return!_Config2.default.enableSendFromHeadless&&-1!==window.navigator.userAgent.indexOf("LiftIgniterHeadlessChrome")&&(_Config2.default.showLiveWarnings&&console.log("LI: You cannot fetch from HeadlessChrome"),!0)}function checkIfOutOfSubsample(){return _Config2.default.activity.activitySamplingPercent<100&&(!_Config2.default.uid||_Utility2.default.djb2HashCode(_Config2.default.uid)%100>_Config2.default.activity.activitySamplingPercent)}function checkIfDuplicateSafe(e,t){try{return checkIfDuplicate(e,t)}catch(e){_Utility2.default.throwScriptError("Error checking if event is duplicate",e)}}function checkIfDuplicate(e,t){var n=void 0,r=t&&t.cu?t.cu:_Config2.default.currentUrl;return r&&_State2.default.urlListByEventType&&_State2.default.urlListByEventType[e]&&_State2.default.urlListByEventType[e].length>0?(n=_State2.default.urlListByEventType[e][_State2.default.urlListByEventType[e].length-1],_State2.default.urlListByEventType[e].push(r)):r&&_State2.default.urlListByEventType&&(_State2.default.urlListByEventType[e]=[r]),r&&r==n&&-1!=_Config2.default.defaultApiEvents.indexOf(e)?(_Config2.default.showLiveWarnings&&_State2.default.tsplsByEventType&&console.log("LI: For the event "+e+", we are trying to send it twice in a row with the same url: "+n+", so we are blocking the second copy of the event from being sent. Time since page load in milliseconds for events by type: ",_State2.default.tsplsByEventType),_State2.default.duplicatesDetected.push(e),!0):!!(-1!=_Config2.default.defaultApiEvents.indexOf(e)&&_State2.default&&_State2.default.tsplsByEventType[e]&&window&&window.performance&&window.performance.now&&"function"==typeof window.performance.now&&!_Config2.default.allowRapidToggling&&(0|window.performance.now())-_State2.default.tsplsByEventType[e][_State2.default.tsplsByEventType[e].length-1]<2e3)&&(_Config2.default.showLiveWarnings&&console.log("LI: The event "+e+" that we were asked to send on the url "+_Config2.default.currentUrl+" at "+(0|window.performance.now())+" milliseconds after page start looks like a duplicate, because we sent a similar event on the url "+n+" less than 2 seconds ago. If you are rapidly toggling between parts of a single-page app, this may not be a problem. Time since page load in milliseconds for all events by type: ",_State2.default.tsplsByEventType),_State2.default.duplicatesDetected.push(e),!0)}function checkForMissingOrDisabledJsKey(){return _Config2.default.jsKey?!!_Config2.default.disabledCust[_Config2.default.jsKey]&&(console.log("LI: Thank you for using LiftIgniter! Your jsKey "+_Config2.default.jsKey+" is disabled. If you are interested in re-activating our service, please contact us at support@liftigniter.com"),_State2.default.updateErrorMessagesByEventType("activity_send_error","LI: Disabled JavaScript key"+_Config2.default.jsKey),!0):(console.log("LI: LiftIgniter send called before LiftIgniter init. The most typical reasons: (a) you omitted the call to init, (b) you are including our JavaScript snippet twice (this could be twice on the page, or once on the page and once in Google Tag Manager, or twice in Google Tag Manager). If you have more questions, please contact support@liftigniter.com"),_State2.default.updateErrorMessagesByEventType("activity_send_error","LI: Missing JavaScript key"),!0)}function checkIfBlockedByRegex(e,t){var n=t&&t.cu?t.cu:_Config2.default.currentUrl;if(n&&_Config2.default.defaultApiEvents&&-1!=_Config2.default.defaultApiEvents.indexOf(e)){if(_Config2.default.activity.itemRegex&&null===n.match(_Config2.default.activity.itemRegex))return _State2.default.updateWarningMessagesByEventType("activity_send_warning","Blocked by item regex, effectiveCurrentUrl = "+n+", itemRegex = "+_Config2.default.activity.itemRegex),!0;if(_Config2.default.activity.excludeRegex&&null!==n.match(_Config2.default.activity.excludeRegex))return _State2.default.updateWarningMessagesByEventType("activity_send_warning","Blocked by exclude regex, effectiveCurrentUrl = "+n+", excludeRegex = "+_Config2.default.activity.excludeRegex),!0}return!1}function sendCommon(evt,ctx,method){if(checkForMissingOrDisabledJsKey())return!1;if(checkIfBadActor())return!1;if(checkForUserId(evt),checkForLiftIgniterHeadless())return!1;if(checkIfDuplicateSafe(evt,ctx))return!1;if(checkIfOutOfSubsample())return!1;if(checkIfBlockedByRegex(evt,ctx))return!1;if(!("conversion"!=evt||ctx.source&&ctx.w)){var source=_Utility2.default.getURLParameter("li_source"),medium=_Utility2.default.getURLParameter("li_medium");source&&(ctx.source=source),medium&&(ctx.w=medium)}_Config2.default.googleAnalytics.trackerName&&_GoogleAnalytics2.default.sendEvents(evt,ctx);var sendResult=!1;if(sendResult="robust"==method?sendRobustActual(evt,ctx):sendOnceActual(evt,ctx),_Config2.default.eventTriggers[evt]){_Config2.default.debug&&console.debug("LI: Evaluating custom event trigger for event "+evt+", triggered actions: "+_Config2.default.eventTriggers[evt]);try{eval(_Config2.default.eventTriggers[evt])}catch(e){console.debug("LI: Error evaluating custom event trigger for event "+evt+", triggered actions: "+_Config2.default.eventTriggers[evt],e)}}return sendResult}function send(e,t){return sendCommon(e,t,"widget_click"==e?"robust":"once")}function sendOnce(e,t){return sendCommon(e,t,"once")}function sendRobust(e,t){return sendCommon(e,t,"robust")}function sendOnceActual(e,t){try{return updateInternalEventCounts(e),(new Image).src=getUrl(e,t),!0}catch(t){return _Config2.default.showLiveWarnings&&console.log("Unexpected error when trying to send event "+e,t),_State2.default.updateErrorMessagesByEventType("activity_send_error","LI: error when generating activity to send, activity of type: "+e+", stack trace: "+(t.stack||"")),!1}}function getLastClick(){return _Config2.default.robustUseStorage?_Storages2.default.getItem(_Config2.default.lastClick):_Config2.default.robustUseCookie?_Cookies2.default.getItem(_Config2.default.lastClick):void 0}function updateInternalEventCounts(e){try{_State2.default&&_State2.default.eventCounts&&(_State2.default.eventCounts[e]?_State2.default.eventCounts[e]=_State2.default.eventCounts[e]+1:_State2.default.eventCounts[e]=1),_State2.default&&_State2.default.tsplsByEventType&&window&&window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(_State2.default.tsplsByEventType[e]=_State2.default.tsplsByEventType[e]||[],_State2.default.tsplsByEventType[e].push(0|window.performance.now()))}catch(t){console.log("LI: Error updating internal event counts for event: "+e,t)}}function sendRobustActual(e,t){function n(e,t,n){var r=getUrl(t,n=_Utility2.default.mergeMap(n,{method:"send_robust",buffer:e.name}));e.setItem(_Config2.default.lastClick,r);for(var i=0;i<e.maxMsgSlot&&e.getItem(_Config2.default.robustMsgSlot+i);i++);return i<e.maxMsgSlot&&e.setItem(_Config2.default.robustMsgSlot+i,r,120),r==e.getItem(_Config2.default.robustMsgSlot+i)&&(sendMsgInBuffer(e,i),!0)}return updateInternalEventCounts(e),!(!_Config2.default.robustUseStorage||!n(_Storages2.default,e,t))||!(!_Config2.default.robustUseCookie||!n(_Cookies2.default,e,t))}function sendMsgInBuffer(e,t){var n=e.getItem(_Config2.default.robustMsgSlot+t);if(n){_Config2.default.debug&&console.debug("LI: sendMsgInBuffer found message in "+e.name+". Index "+t);var r=new Image;r.onload=function(){e.removeItem(_Config2.default.robustMsgSlot+t)},r.src=n}}function checkBuffer(){for(var e=0;e<_Cookies2.default.maxMsgSlot;e++)_Config2.default.debug&&console.debug("LI: checkBuffer in cookies: check cookie "+e),sendMsgInBuffer(_Cookies2.default,e);for(e=0;e<_Storages2.default.maxMsgSlot;e++)_Config2.default.debug&&console.debug("LI: checkBuffer in storages: check storage "+e),sendMsgInBuffer(_Storages2.default,e)}function keepCheckingBuffer(){checkBuffer(),window.setInterval(function(){checkBuffer()},1e4)}exports.default={send:send,getUrl:getUrl,sendOnce:sendOnce,sendRobust:sendRobust,checkBuffer:checkBuffer,storeLatestVisibleItems:storeLatestVisibleItems,getLatestVisibleItems:getLatestVisibleItems,getLastClick:getLastClick,updateInternalEventCounts:updateInternalEventCounts,keepCheckingBuffer:keepCheckingBuffer}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function o(){if(navigator.cookieEnabled)return!0;try{document.cookie="cookietest=1";var e=-1!=document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(e){return console.log("LI: Unexpected errors manipulating cookies, hence we are assuming no cookies access",e),!1}}function s(e,t,n,i){try{i=i||864e5;var a="";if(n){var o=new Date;o.setTime(o.getTime()+n*i),a=";expires="+o.toGMTString()}var s=r.default.cookieDomain?";domain="+r.default.cookieDomain:"";u(e),document.cookie=e+"="+t+a+s+";path=/"}catch(n){console.log("[WARN] LI: Cookie creation failed for name "+e+", value "+t,n)}}function l(e){try{for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}catch(t){return console.log("[WARN] LI: Cookie read failed for "+e,t),null}}function u(e){try{var t=r.default.cookieDomain?";domain="+r.default.cookieDomain:"";document.cookie=e+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"+t+";path=/",document.cookie=e+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/"}catch(t){console.log("[WARN] LI: Cookie deletion failed for "+e,t)}}function d(e){if("string"==typeof e&&""!==e){var t="donottrack"==e?7300:365;r.default.uid=e,s(r.default.permKey,r.default.uid,t)}}function c(e){"string"==typeof e&&(r.default.gid=e,s(r.default.thirdKey,e,365))}t.default={setGlobalId:c,setUserId:d,setSessionId:function(e){"string"==typeof e&&""!==e&&(r.default.sid=e,s(r.default.sessKey,r.default.sid))},createCookie:s,readCookie:l,deleteCookie:u,initializeCookies:function(){l(r.default.numPerKey);var e=o();e&&(u(r.default.thirdKey),r.default.uid=l(r.default.permKey)),r.default.uid?d(r.default.uid):e?d(i.default.generateUUID()):r.default.uid="nocookieaccess",e&&(r.default.sid=l(r.default.sessKey)),r.default.sid||(e?(r.default.sid=i.default.generateUUID(),s(r.default.sessKey,r.default.sid)):r.default.sid="nocookieaccess"),r.default.pvid=i.default.generateUUID(),r.default.customBrowsingHistory&&r.default.sdk.historyTracking?r.default.customBrowsingHistory():e&&u(r.default.histKey),e&&(u(r.default.numPerKey),u(r.default.numSesKey),u(r.default.sessRefKey),u(r.default.userRefKey),"donottrack"==r.default.uid?s(r.default.permKey,r.default.uid,7300):s(r.default.permKey,r.default.uid,365))},hasCookiesEnabled:o,getItem:l,setItem:function(e,t,n){s(e,t,n,1e3)},removeItem:u,maxMsgSlot:3,name:"cookie",appendToClickHist:function(e,t,n){var i=r.default.clickHist.clickHistCKey,a=decodeURIComponent(l(i)),u="null"!==a?a.split(","):[],d=r.default.clickHist.cap||10,c=!1,f=r.default.clickHist.urlTrans(e);if(u=u.slice(Math.max(u.length-d,0),u.length),null!==f&&void 0!==f&&""!==f){for(var g=0;g<u.length;g++)u[g].split("|")[0]===f&&(c=!0);c||(u.length>=d&&u.shift(),u.push(f+"|"+t+"|"+n)),o()&&s(i,encodeURIComponent(u.join(",")),365)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=c(n(0)),a=c(n(19)),o=c(n(6)),s=c(n(22)),l=(c(n(12)),c(n(7))),u=c(n(4)),d=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var f=Object.assign||n(28).assign;function g(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function p(e,t){var n=i.default.sdk.useLocationForCurrentUrl?window.location.href:e?i.default.frontPageBoost:i.default.isInIframe?document.referrer:i.default.currentUrl;return n=i.default.activity.urlTransform(n),(t=t||{}).ts=s.default.getCurrentTime(),t.jsk=i.default.jsKey,t.jsv=i.default.version,t.cu=n,t}function h(e,t){try{i.default.showLiveWarnings&&console.log(e,t),d.default.updateWarningMessagesByEventType("activity_data_attach_error",e+": "+(t.stack||""))}catch(e){console.log("LI: Unexpected error with activity_data_attach_error",e)}}t.default={forCurrentExample:function(e,t){if(t=t||{},i.default.qOpt.dynScrollInfo)try{t.sppx=a.default.maxVertScrollPos(),t.sppc=a.default.maxVertScrollPct(),t.dh=a.default.getDocHeight(),t.iwid=window.innerWidth,t.ihei=window.innerHeight}catch(e){t.errs=(t.errs?t.errs+"; ":"")+"Error reading scroll information: "+e,h("LI: Error reading scroll information",e)}try{var n;if(i.default.histSettings.origin)n=i.default.activity.canonicalUrlTransform(i.default.histSettings.origin+window.location.pathname);else{var r=i.default.isInIframe?o.default.getCanonicalUrlIframe():o.default.getCanonicalUrl();n=i.default.customContext.id?i.default.customContext.id:i.default.useCanonicalUrl?e?i.default.frontPageBoost:i.default.activity.canonicalUrlTransform(r):null}t.ct=o.default.getCurrentTitle(),t.ccu=n}catch(e){h("LI: Error attaching url and title in activity",e)}try{var c=null;if(i.default.clickHist.send)if(i.default.clickHist.onLocalStorage){var g=l.default.getItem(i.default.clickHist.clickHistLKey);c=null==g?null:JSON.parse(g)}else i.default.clickHist.onCookie&&(c=u.default.readCookie(i.default.clickHist.clickHistCKey).split(","));t.clkHist=c}catch(e){t.errs=(t.errs?t.errs+"; ":"")+"Error working with click history cookie: "+e,h("LI: Error working with click history cookie",e)}try{if(window.performance&&window.performance.now&&"function"==typeof window.performance.now){var m=0|window.performance.now();t.tspl=m}d.default.startupTimes.beaconLoadStartTime&&(t.blst=d.default.startupTimes.beaconLoadStartTime),d.default.startupTimes.initStartTime&&(t.ist=d.default.startupTimes.initStartTime),d.default.startupTimes.initEndTime&&(t.iet=d.default.startupTimes.initEndTime)}catch(e){t.errs=(t.errs?t.errs+"; ":"")+"Error determining time since page load: "+e,h("LI: Error determining time since page load",e)}try{var y=i.default.sdk.manualHist?i.default.sdk.manualHist:i.default.getHistList();p(null,t),i.default.claimedGid&&(t.cgid=i.default.claimedGid),t.uid=i.default.uid,t.sid=i.default.sid,t.pvid=i.default.pvid,t.hist=i.default.activity.includeBrowsingHistory?y:null}catch(e){t.errs=(t.errs?t.errs+"; ":"")+"Error attaching user, session, or page identifiers: "+e,h("LI: error attaching user, session, or page identifiers to paramsObj",e)}try{t.ua=i.default.userAgent,t.l=i.default.language,t.os=i.default.os,i.default.qOpt.screenDim&&(t.scd=i.default.colorDepth,t.scrh=i.default.screenHeight,t.scrw=i.default.screenWidth),t.ref=i.default.referrer?i.default.referrer:null}catch(e){t.errs=(t.errs?t.errs+"; ":"")+"Error attaching user environment information: "+e,h("LI: error attaching user environment information to paramsObj",e)}try{i.default.customInfo&&f(t,i.default.customInfo())}catch(e){t.errs=(t.errs?t.errs+"; ":"")+"Error with customInfo assignment: "+e,h("LI: error with customInfo assignment to paramsObj",e)}try{s.default.getTimezoneOffset();t.tzo=s.default.getTimezoneOffset()}catch(e){t.errs=(t.errs?t.errs+"; ":"")+"Error attaching timezone offset: "+e,h("LI: error attaching timezone offset. All other steps succeeded",e)}return t},getParam:g,copyParam:function(e,t){t=t||"&";var n=g(e);return n?t+e+"="+n:""},replaceParams:function(e,t){for(var n=e.split("#",2),i=r(n,2),a=i[0],o=i[1],s=a.split("?",2),l=r(s,2),u=l[0],d=l[1],c=d?d.split("&"):[],f=c.length;f-- >0;){var g=c[f].split("=",2),p=r(g,2),h=p[0];p[1];try{decodeURIComponent(h.replace(/\+/g," "))in t&&c.splice(f,1)}catch(e){}}for(var m in t){var y=t[m];t.hasOwnProperty(m)&&null!=y&&c.push(encodeURIComponent(m)+"="+encodeURIComponent(y))}return u+(c.length>0?"?"+c.join("&"):"")+(null!=o?"#"+o:"")},basicParam:p,getUrlParameter:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))},updateUrlParameter:function(e,t,n){var r=e.indexOf("#"),i=-1===r?"":e.substr(r);e=-1===r?e:e.substr(0,r);var a=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return(e=e.match(a)?e.replace(a,"$1"+t+"="+n+"$2"):e+o+t+"="+n)+i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(n(1)),a=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var s,l=window,u=document;function d(e,t){t=void 0!==t&&t;for(var n=[],r=u.querySelectorAll(e),i=0;i<r.length;i++)n.push(r[i].textContent);return t?n:n[0]}function c(e,t,n){n=void 0!==n&&n;for(var r=[],i=u.querySelectorAll(e),a=0;a<i.length;a++)r.push(i[a].getAttribute(t));return n?r:r[0]}function f(e){return function e(t,n){return 0==n.length?t:e(t[n[0]],n.slice(1))}(l,e.split("."))}function g(e,t){if(void 0!==t){var n=[],r=t.exec(e);if(t.global)for(;r;)n=n.concat(r.slice(1)),r=t.exec(e);else n=r.slice(1);return n}return[e]}function p(e){for(var t={},n=u.querySelectorAll("meta[property^='"+e+":'][content]"),r=0;r<n.length;r++){var i=n[r].getAttribute("property").slice(e.length+1),a=t[i]||[];a.push(n[r].getAttribute("content")),t[i]=a}return t}function h(e,t){var n=t.name;if("substring"==n)return e.substring(t.start||0,t.end||e.length);if("trim"==n)return e.trim();if("replace"==n)return e.replace(new RegExp(t.old,"g"),t.new);if("pad"==n)return(t.left||"")+e+(t.right||"");if("split"==n)return e.split(t.separator||",");if("removeEmpty"==n){if(""===e)return[]}else{if("shorten"==n)return e.length>t.size?e.substring(0,t.size)+t.suffix:e;if("parseJsonArray"==n)try{var r=JSON.parse(e);return Array.isArray(r)?r:e}catch(t){return e}else{if("exist"==n)return e?"true":"";if("noExist"==n)return e?"":"true"}}return e}function m(e){var t,n=[];try{if("text"==e.type)t=d(e.selector,!0);else if("attribute"==e.type)t=c(e.selector,e.attribute,!0);else if("url"==e.type)t=l.location.href;else if("var"==e.type)t=[f(e.variable).toString()];else if("varArray"==e.type)t=f(e.variable);else if("defined"==e.type)return(t=c(e.selector,e.attribute,!0))&&t.length?"true":"false";if(t)for(var r=0;r<t.length;r++){var i=t[r];if("function"==typeof e.transform&&(i=e.transform(i)),e.transforms)for(var a=0;a<e.transforms.length;a++)if(Array.isArray(i))if("join"==e.transforms[a].name)i=i.join(e.transforms[a].separator);else if("index"==e.transforms[a].name){var o=e.transforms[a].index;i=o>=0&&o<i.length?i[o]:[]}else{for(var s=[],u=0;u<i.length;u++)s=s.concat(h(i[u],e.transforms[a]));i=s}else i=h(i,e.transforms[a]);Array.isArray(i)||(i=g(i,e.regex),void 0!==e.joinWith&&(i=[i.join(e.joinWith)])),n=n.concat(i)}}catch(e){n=[]}return n}function y(){var e=u.getElementsByTagName("title");if(e.length>0)return e[0].textContent.trim()}t.default={getCurrentTitle:function(){var e=u.querySelector("meta[property='og:title'][content]");return e?e.getAttribute("content"):y()||"-1"},getTitleFallback:y,getCanonicalUrl:function(){return s&&!a.default.inventory.alwaysRefreshCanonicalUrl||(s=a.default.inventory.canonicalUrlTransform(function(){if(a.default.inventory.useOpenGraphForCanonicalUrl&&(e=u.querySelector("meta[property='og:url'][content]")))return e.getAttribute("content");if(a.default.inventory.useLinkRelForCanonicalUrl){var e=u.querySelector("link[rel=canonical][href]");if(e)return function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash}(e.getAttribute("href"))}var t=l.location.href;return a.default.inventory.stripTagsForCanonicalUrl&&(t=t.split("?")[0]),a.default.inventory.stripHashesForCanonicalUrl&&(t=t.split("#")[0]),t}())),s},getCanonicalUrlIframe:function(){return s||(s=a.default.inventory.canonicalUrlTransform(function(){var e=document.referrer;return a.default.inventory.stripTagsForCanonicalUrl&&(e=e.split("?")[0]),a.default.inventory.stripHashesForCanonicalUrl&&(e=e.split("#")[0]),e}())),s},getText:d,getAttribute:c,scrapeFeature:m,scrapeOpenGraph:function(){var e=p("og");if(void 0!=e.type){var t=e.type[0].split(".")[0],n=a.default.inventory.defaultType;switch(t){case"article":case"video":case"book":case"music":e=i.default.mergeMap(p(t),e);break;default:e=i.default.mergeMap(p(n),e)}}return e},scrapeJSON:function(){var e=u.querySelector("#liftigniter-metadata");if(e){var t=e.textContent;if(a.default.inventory.jsonTransform&&(t=a.default.inventory.jsonTransform(t)),t){var n=JSON.parse(t);for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o&&"object"==(void 0===o?"undefined":r(o))&&"object"==r(o[0]))delete n[i];else if("number"!=typeof o){if("object"==(void 0===o?"undefined":r(o))){o=[].concat(o);for(var s=0;s<o.length;s++)o[s]&&(o[s]=o[s].toString())}else o=[o.toString()];n[i]=o}}return n}return{}}return{}},transformFeature:h,fetchDynamicParams:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&("object"!==r(e[n])||Array.isArray(e[n])?t[n]=e[n]:t[n]=m(e[n]));return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(n(0)),a=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=window,l=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}()?s.localStorage:{setItem:function(){},getItem:function(){},removeItem:function(){}},u=function(){try{return sessionStorage.setItem("test","test"),sessionStorage.removeItem("test"),!0}catch(e){return!1}}()?s.sessionStorage:{setItem:function(){},getItem:function(){},removeItem:function(){}},d="expireTimestamp";function c(e){var t,n,r=0;if(0==e.length)return r;for(t=0,n=e.length;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r}function f(e){for(var t=JSON.parse(m(i.default.longHistKey))||[],n=c(e),r=t.length,a=!1,o=0;o<r;++o)if(t[o]==n){a=!0;for(var s=o+1;s<r;++s)t[s-1]=t[s];t[r-1]=n;break}if(!a){for(;t.length>=i.default.longHist.bufferSize;)t.shift();t.push(n)}p(i.default.longHistKey,JSON.stringify(t))}function g(){try{l.setItem("_igst","8");var e="8"==l.getItem("_igst");return l.removeItem("_igst"),e}catch(e){return!1}}function p(e,t,n){l.setItem(e,t),n&&l.setItem(e+d,(new Date).getTime()+1e3*n)}function h(e){l.removeItem(e),l.removeItem(e+d)}function m(e){var t=l.getItem(e+d);return!t||t>=(new Date).getTime()?l.getItem(e)||null:(h(e),null)}function y(){try{var e=i.default.sdk.persistentConfigKey;if(g()){var t=m(e),n=JSON.parse(t);return null==n?{}:n}return{}}catch(e){return{}}}function v(){var e={};try{var t=i.default.sdk.persistentQueryOptsKey;if(g()){var n=m(t),r=JSON.parse(n);return null==r?e:r}return e}catch(t){return e}}t.default={hasStorageEnabled:g,setItem:p,getItem:m,removeItem:h,maxMsgSlot:10,name:"local_storage",storeVisibleElements:function(e){for(var t=JSON.parse(m(i.default.shown.freqCapKey))||[],n=0;n<e.length;++n){for(;t.length>=i.default.shown.bufferSize;)t.shift();t.push(c(e[n].split("?")[0].split("#")[0]))}p(i.default.shown.freqCapKey,JSON.stringify(t))},getFrequent:function(){for(var e=JSON.parse(m(i.default.shown.freqCapKey))||[],t={},n=[],r=e.length;--r>=0&&n.length<i.default.shown.maxExclude;){var a=e[r];t[a]?t[a]+=1:t[a]=1,t[a]>=i.default.shown.freqCap&&-1==n.indexOf(a)&&n.push(a)}var o=[];return n.forEach(function(e){o.push(e)}),JSON.stringify(o)},appendUrlToLongHist:function(e){var t="http://www.ozy.com/acumen/";if(0!=e.indexOf(t))f(e);else{var n=e.replace("/ozy-ted-","/").replace(t,""),r=t+"ozy-ted-"+n;f(t+n),f(r)}},getLongHist:function(){var e=m(i.default.longHistKey)||JSON.stringify([]);if(i.default.longHist.dropRecent>0){var t=JSON.parse(e).length;t>=i.default.longHist.dropRecent?e=JSON.stringify(JSON.parse(e).slice(0,t-i.default.longHist.dropRecent)):JSON.stringify([])}return e},appendToClickHist:function(e,t,n){var r=i.default.clickHist.clickHistLKey||"_igClkHis",a=JSON.parse(m(r))||[],o=i.default.clickHist.cap||10,s=!1,l=i.default.clickHist.urlTrans(e);if(a=a.slice(Math.max(a.length-o,0),a.length),null!==l&&void 0!==l&&""!==l){for(var u=0;u<a.length;u++)a[u].split("|")[0]===l&&(s=!0);s||(a.length>=o&&a.shift(),a.push(l+"|"+t+"|"+n)),p(r,JSON.stringify(a))}},sessStorage:u,setPersistentConfig:function(e){if("object"!=(void 0===e?"undefined":r(e))||!g())return"object"!=(void 0===e?"undefined":r(e))?(console.log("LI: Second argument after setPersistentConfig must be a map"),!1):(console.log("LI: Local storage must be available to set persistent config"),!1);try{return p(i.default.sdk.persistentConfigKey,JSON.stringify(e),2592e3),a.default.persistentConfig=e,console.debug("Persistent config has been set. Please start a new page load for the settings to fully take effect"),!0}catch(e){return console.log("LI: Could not update persistent config, exception: ",e),!1}},getPersistentConfig:y,setPersistentQueryOpts:function(e){if("object"!=(void 0===e?"undefined":r(e))||!g())return"object"!=(void 0===e?"undefined":r(e))?(console.log("LI: Second argument after setPersistentQueryOpts must be a map"),!1):(console.log("LI: Local storage must be available to set persistent query opts"),!1);try{return p(i.default.sdk.persistentQueryOptsKey,JSON.stringify(e),2592e3),a.default.persistentQueryOpts=e,!0}catch(e){return console.log("LI: Could not update persistent query opts, exception: ",e),!1}},getPersistentQueryOpts:v,initializeStoredSettings:function(){a.default.persistentQueryOpts=v(),a.default.persistentConfig=y()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var i={},a={},o={},s={};function l(e){return e.widgets||(e.widgets={}),e.widgets["default-widget"]={dedupGid:"0"},e.itemRegex||(e.itemRegex=".+"),e}t.default={addExtension:function(e,t){i[e]=t},addMaybeExtendSdkFunctions:function(e,t){s[e]=t},getMaybeExtendSdkFunctions:function(e){return s[r.default.jsKey]?s[r.default.jsKey][e]:null},addWidgetData:function(e,t){o[e]=t},getWidgetData:function(){return r.default.jsKey in o?l(o[r.default.jsKey]):l({})},addEarlyExtension:function(e,t){a[e]=t},maybeRunExtension:function(){r.default.jsKey in i&&void 0!==i[r.default.jsKey].run&&i[r.default.jsKey].run()},maybeRunEarlyExtension:function(){r.default.jsKey in a&&void 0!==a[r.default.jsKey].run&&a[r.default.jsKey].run()},maybeRunExtensionRender:function(e){r.default.jsKey in i&&void 0!==i[r.default.jsKey].render&&i[r.default.jsKey].render(e)},reset:function(){i={},a={}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window;t.default={addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){return n.call(e,r.event)})},domReady:function e(t){/in[^t]/.test(document.readyState)?r.setTimeout(function(){e(t)},100):t()},domComplete:function e(t){/complete/.test(document.readyState)?t():r.setTimeout(function(){e(t)},100)},doWhenReady:function e(t,n){t()?n():r.setTimeout(function(){e(t,n)},50)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(11)),i=d(n(17)),a=d(n(0)),o=d(n(4)),s=d(n(3)),l=d(n(2)),u=(d(n(8)),d(n(1)));function d(e){return e&&e.__esModule?e:{default:e}}var c=!0,f=(window,document);function g(){a.default.debug&&console.debug("LI: Running resetPageview at time: "+u.default.getNowOrTime()),a.default.refresh(),a.default.sdk.pushStateCallback(),l.default.refresh(),o.default.initializeCookies(),r.default.clearTimers(),r.default.initializeTimers(),i.default.sendUrlChange(),s.default.send("pageview")}t.default={initializeNavigationEvents:function(){if(window.history){var e=window.history.pushState;window.history.pushState=function(t){return a.default.sdk.pushStateReset&&(a.default.debug&&console.debug("LI: Identified pushState change, triggering resetPageview based on Config.sdk.pushStateReset = true at time: "+u.default.getNowOrTime()),setTimeout(g,0)),e.apply(window.history,arguments)};var t=window.history.replaceState;window.history.replaceState=function(e){return a.default.sdk.replaceStateReset&&(a.default.debug&&console.debug("LI: Identified replaceState change, triggering resetPageview based on Config.sdk.pushStateReset = true at time: "+u.default.getNowOrTime()),setTimeout(g,0)),t.apply(window.history,arguments)}}var n=window.onhashchange||function(){return!0};window.onhashchange=function(){return c&&setTimeout(g,0),n.apply(window,arguments)};var r=window.onpopstate||function(){return!0};window.onpopstate=function(){return i.default.sendUrlChange(),r.apply(window,arguments)}},setOnHashChangeReset:function(e){c=e},setPushStateReset:function(e){a.default.sdk.pushStateReset=e},isElementVisible:function(e){a.default.sdk.debugTrack&&console.debug("LI: Entered isElementVisible on element at time: "+u.default.getNowOrTime(),e);var t=e.getBoundingClientRect(),n=window.innerWidth||f.documentElement.clientWidth,r=window.innerHeight||f.documentElement.clientHeight,i=function(e,t){return document.elementFromPoint(e,t)};if(a.default.sdk.debugTrack&&console.debug("LI: Bounding rectangle for element: ",t),t.right<0||t.bottom<0||t.left>n||t.top>r)return a.default.sdk.debugTrack&&console.debug("LI: Rectangle determined to be outside viewport, using parameters "+n+" and "+r,t),!1;0==t.height&&a.default.sdk.debugTrack&&console.log("LI: getBoundingClientRect has height of 0 for element: ",e);var o=!1;a.default.checkElementParentIsActuallyVisible&&(o=e.parentNode==i(t.left,t.top)||e.parentNode==i(t.right,t.top)||e.parentNode==i(t.right,t.bottom)||e.parentNode==i(t.left,t.bottom));var s=e.contains(i(t.left,t.top))||e.contains(i(t.right,t.top))||e.contains(i(t.right,t.bottom))||e.contains(i(t.left,t.bottom))||e.contains(i((t.left+t.right)/2,(t.top+t.bottom)/2));return a.default.sdk.debugTrack&&console.debug("LI: Is element actually visible? "+s),s||o},debounce:function(e,t,n){var r;return function(){var i=this,a=arguments,o=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,a)},t),o&&e.apply(i,a)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var o=window,s=[];t.default={initializeTimers:function(){if(r.default.qOpt.sendTimer&&r.default.timers)for(var e in r.default.timers)this.sendLater(e,r.default.timers[e])},clearTimers:function(){for(var e=0;e<s.length;e++)o.clearTimeout(s[e])},sendLater:function(e,t){s.push(o.setTimeout(function(){var t={w:i.default.getURLParameter("li_medium"),source:i.default.getURLParameter("li_source")};o[r.default.pmVar]("send",e,t)},t))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="abcdefghijklmnopqrstuvwxyz"+"abcdefghijklmnopqrstuvwxyz".toUpperCase()+"0123456789",i=r.length;t.default={randomString:function(){return Math.random().toString(36).substr(2,16)},randomStringGid:function(e){for(var t=[];e>0;)t.push(r[Math.floor(i*Math.random())]),e--;return t.join("")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.thirdPartyFetch=s;var i=o(n(1)),a=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,o,s,u){if("string"!=typeof e)throw Error("url must be string");if(null==t||!(t>=0))throw Error("Timeout must be non-negative number. 0 means no timeout.");if("function"!=typeof n)throw Error("Expected successCallback to be function");if("function"!=typeof r)throw Error("Expected errorCallback to be function");o=!!o,s=!!s;var d=null!=u;u=u||{};var c=s?null:"undefined"!=typeof XMLHttpRequest&&(!o||"withCredentials"in XMLHttpRequest.prototype)?new XMLHttpRequest:o||"undefined"==typeof XDomainRequest?null:new XDomainRequest,f=void 0;null==c?(f="igniter_"+i.default.generateUUID().replace(/-/g,""),u.jsonp=f,u.sdk="bc-jsonp"):(u.crd=o||null,u.sdk=d?"bc-xhr-post":"bc-xhr-get");var g=void 0;if(d&&null!=c)g=JSON.stringify(u,function(e,t){if(null!=t)return t});else{var p=l(u);e=e+(p?e.indexOf("?")>=0?"&":"?":"")+p}if(u=null,null==c){var h=document.createElement("script"),m=!1,y=0==t?null:setTimeout(function(){m||(m=!0,w())},t);return window[f]=function(e){delete window[f],m||(m=!0,null!=y&&clearTimeout(y),n(e)),h.parentNode.removeChild(h)},h.async=h.defer=!0,h.src=e,h.onerror=function(e){m||(m=!0,null!=y&&clearTimeout(y),r(-3,"Jsonp script failed to load")),h.parentNode.removeChild(h)},void document.head.appendChild(h)}var v=d?"POST":"GET";c.open(v,e),c.withCredentials=o,c.onload=function(e){var t=this.responseText;if(200===this.status||null==this.status&&"{"===t[0]){var i=void 0;try{i=JSON.parse(t)}catch(e){return void r(0,t)}null==i.statusCode||200==i.statusCode?n(i):r(i.statusCode,t)}else r(this.status,t)},c.ontimeout=w,c.onerror=function(e){a.default.showLiveWarnings&&console.log("LI: error details:",e);var t=this.status||0;this.withCredentials?r(t,"network error: request was with credentials"):r(t,"network error: request was without credentials")},c.timeout=t;try{c.send(g)}catch(e){r(-1,e.name+": "+e.message+(null!=e.description?" "+e.description:""))}function w(){r(-2,"client timeout")}}function l(e){var t="",n="";for(var i in e)if(e.hasOwnProperty(i)){var a=e[i],o=Array.isArray(a),s=void 0===a?"undefined":r(a),l="string"==s||"number"==s&&isFinite(a)||"boolean"==s;if(o||l||"object"==s&&null!=a){var u=l?a:"globalHist"===i?a.join("|"):JSON.stringify(a);t+=(""+n+encodeURIComponent(i)+"="+encodeURIComponent(u)).replace(/%20/g,"+"),n="&"}}return t}t.default={thirdPartyFetch:s,toQueryString:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=v(n(16)),a=v(n(0)),o=v(n(5)),s=v(n(8)),l=v(n(1)),u=v(n(9)),d=v(n(3)),c=(v(n(7)),v(n(15))),f=v(n(2)),g=(v(n(10)),v(n(4))),p=v(n(11)),h=v(n(13)),m=v(n(12)),y=v(n(33));function v(e){return e&&e.__esModule?e:{default:e}}var w=window,b=document;l.default.size;function k(){if(a.default.uid?"donottrack"==a.default.uid?(a.default.showLiveWarnings&&console.log('LI: The userId (uid), as read in from the _ig cookie, is set to donottrack, which means LiftIgniter is not personalizing recommendations to your browsing history; recommendations will be based only on the context directly available from the current impression. Run $p("optBack") to opt back in to being tracked by LiftIgniter'),l.default.sendPixelAndMarkErrorMessage("widget_request_error","user opted out of first-party tracking")):"nocookieaccess"==a.default.uid&&(a.default.showLiveWarnings&&console.log("LI: We were unable to access browser cookies, so are unable to personalize recommendations to your browsing history; recommendations will be based only on the context directly available from the current impression. Check your browser's cookie access settings"),l.default.sendPixelAndMarkErrorMessage("widget_request_error","user does not allow browser cookie access")):(a.default.showLiveWarnings&&console.log('LI: userId (uid) is not defined. Request for recommendations will not yield personalized recommendations. This could be because you are using addEarlyExtension() instead of addExtension(), or running $p("fetch") before $p("init")'),l.default.sendPixelAndMarkErrorMessage("widget_request_error","missing userId")),!a.default.enableSendFromHeadless&&-1!==window.navigator.userAgent.indexOf("LiftIgniterHeadlessChrome"))return a.default.showLiveWarnings&&console.log("LI: You cannot fetch from HeadlessChrome"),!1;if(a.default.jsKey?a.default.disabledCust[a.default.jsKey]&&(console.log("LI: Thank you for using LiftIgniter! If you are interested in re-activating our service, please contact us at support@liftigniter.com"),1):(console.log("LI: Couldn't find your jsKey. Please initialize first. The most typical reason for this is that you are including our JavaScript snippet twice (this could be twice on the page, or once on the page and once in Google Tag Manager, or twice in Google Tag Manager). If you have more questions, please contact support@liftigniter.com"),1))return!1;var e=l.default.getURLParameter("li-view-mode"),t="";return f.default.fetchCalled&&!a.default.sdk.multiFetch&&"console"!==e?(!0===f.default.allowRegister&&a.default.showLiveWarnings&&console.log("LI: fetch called before. Doing nothing"),t="fetch called before"):f.default.fetchData.started&&!f.default.fetchData.finalized?(a.default.showLiveWarnings&&console.log("LI: fetch currently in progress. Please register *all* widgets before running fetch, or wait for fetch to complete before making the next fetch request"),t="fetch in progress"):0==f.default.fetchData.fetchQueue.length&&(a.default.showLiveWarnings&&a.default.sdk.notifyForEmptyFetchQueue&&console.log("LI: There is nothing in the queue to fetch, so not fetching. If you intended to register widgets on this page, please call our SDK's register function to register widgets first, before calling fetch"),t="nothing in fetch queue"),""==t||(("nothing in fetch queue"!=t||a.default.sdk.notifyForEmptyFetchQueue)&&l.default.sendPixelAndMarkErrorMessage("widget_request_error","fetch failed: "+t),!1)}function T(){return s.default.getWidgetData()}function _(e){return!!function(e){var t=l.default.getURLParameter("li-view-mode"),n="";e?!1===f.default.allowRegister?(a.default.showLiveWarnings&&console.log("LI: We are not allowed to register widgets for this account through the SDK. This is most likely because widget rendering is being handled through our new dashboard-based Rec Units"),n="register not allowed"):f.default.fetchCalled&&!a.default.sdk.multiFetch&&"console"!==t?(a.default.showLiveWarnings&&console.log("LI: fetch has been called already, so we are not registering this widget. Please make sure to register all widgets prior to calling fetch"),n="fetch called before"):f.default.fetchData.started&&!f.default.fetchData.finalized?(a.default.showLiveWarnings&&console.log("LI: fetch currently in progress. Registration of additional widgets is disabled until the fetch is completed. Please make sure to register all widgets either prior to calling fetch, or after the fetch has completed"),n="fetch in progress"):(l.default.getParam(e,"max","number")||(a.default.showLiveWarnings&&console.log("LI: Could not register widget because the max parameter (the number of recommendations to return) was missing"),n="max not specified"),!(r=l.default.getParam(e,"widget","string"))&&a.default.sdk.requireWidgetNameInRegister&&(a.default.showLiveWarnings&&console.log("LI: Could not register widget because the widget parameter (the name of the widget to register as) was missing"),n="widget not specified"),l.default.getParam(e,"callback","function")||(a.default.showLiveWarnings&&console.log("LI: Could not register widget because the callback was not specified."),n="callback not specified")):(a.default.showLiveWarnings&&console.log("LI: The object we are trying to register is not valid, so not registering"),n="invalid object");if(""!=n){var r;return r=l.default.getParam(e,"widget","string"),l.default.sendPixelAndMarkErrorMessage("widget_request_error","register failed: "+n,{w:r}),e&&e.onRejection&&"function"==typeof e.onRejection&&e.onRejection(n),!1}return!0}(e)&&y.default.register(e)}function I(e){e&&(e.name||(a.default.showLiveWarnings&&console.log("LI: specify the widget name on tracking function. Setting widget name to default-widget by default"),e.name="default-widget"),"function"==typeof a.default.sdk.customTrackFunc&&a.default.sdk.customTrackFunc(e),c.default.track(e))}function S(e){var t=l.default.djb2HashCode(a.default.uid||0);if(!e||"function"!=typeof e){if(e){var n=l.default.getParam(e,"callback","function");return n?n(t):t}return t}e(t)}function C(e,t){var n=t||{},r=b.querySelectorAll(e);return Array.prototype.slice.call(r,n.st,n.e)}function L(){try{if(-1!=w.location.search.indexOf("igniter_abhash")){var e=parseInt(o.default.getParam("igniter_abhash"));if(!isNaN(e)&&e<100&&e>=0)return e}}catch(e){}return S()%100}t.default={getWidgetNames:function(e){var t=l.default.getObjectKeys(T().widgets);if(e&&"function"==typeof e)return e(t);if(e){var n=l.default.getParam(e,"callback","function");return n?n(t):t}return t},register:_,fetch:function(e){return k()?y.default.fetch(e):(e&&e.onRejection&&"function"==typeof e.onRejection?e.onRejection():e&&e.callback&&"function"==typeof e.callback&&e.callback("rejected"),!1)},resetPageview:function(e){a.default.refresh(),f.default.refresh(),g.default.initializeCookies(),p.default.clearTimers(),p.default.initializeTimers(),d.default.send("pageview",e)},monitorSearch:function(e,t){var n=document.querySelector(e);n&&n.addEventListener("keypress",function(e){13==e.which&&d.default.send("search_enter",{source:t,q:e.target.value})},!1)},track:I,userHash:S,userId:function(e){if(e){var t=l.default.getParam(e,"callback","function");return t?t(a.default.uid):a.default.uid}return a.default.uid},render:function(e,t,n,r){var a=r||["{{","}}"];i.default.parse(e,a);var o=i.default.render(e,t);return"function"==typeof n?n(o):o},renderCustomWidget:function(e){var t=T();"function"==typeof t.render?t.render(e):a.default.showLiveWarnings&&console.log("LI: Custom widget not defined.")},setRequestFields:function(e){"[object Array]"===Object.prototype.toString.call(e)?a.default.sdk.requestFields=e:console.error("LI: Error setting request fields: input is not an array.")},setArrayRequestFields:function(e){"[object Array]"===Object.prototype.toString.call(e)?a.default.sdk.arrayRequestFields=e:console.error("LI: Error setting array request fields: input is not an array.")},setMandatoryRequestFields:function(e){"[object Array]"===Object.prototype.toString.call(e)?a.default.sdk.mandatoryRequestFields=e:console.error("LI: Error setting mandatory request fields: input is not an array.")},setMandatoryArrayRequestFields:function(e){"[object Array]"===Object.prototype.toString.call(e)?a.default.sdk.mandatoryArrayRequestFields=e:console.error("LI: Error setting mandatory array request fields: input is not an array.")},setRequestFieldsAON:function(e){"boolean"==typeof e?a.default.sdk.requestFieldsAON=e:console.error("LI: Error setting request fields all or nothing: input is not a boolean.")},setGetQueryInfo:function(e){"boolean"==typeof e?a.default.sdk.getQueryInfo=e:console.error("Error changing setting on getting query info: input is not a boolean.")},setNoTag:function(e){"boolean"==typeof e?a.default.noTag=e:console.error("Error setting noTag: input is not a boolean.")},isActivated:function(){return!function(e){return 0==Object.keys(e).length}(T())},addRecsHelper:function(e,t,n,r,a,o,s,l){o=o||{},_({max:e,widget:n,callback:function(e){var a=e.items,d=s||function(){var e=o.fullRender?o.topLevelCss:t;return b.querySelectorAll(e).length>0};u.default.doWhenReady(d,function(){o.preproc&&(a=w[o.preproc](a,n)),function(e,t,n,r,a,o){var s,l=a||{};if(l.fullRender)b.querySelector(l.topLevelCss).innerHTML=i.default.render(r,{items:n}),s=C(e,l.replaceRange);else{s=C(e,l.replaceRange);for(var u=Math.min(s.length,n.length),d=0;d<u;++d)if(l.outer){var c=b.createElement("div");c.innerHTML=i.default.render(r,n[d]),s[d].parentNode.replaceChild(c.firstChild,s[d])}else"{}"!==JSON.stringify(n[d])&&(s[d].innerHTML=i.default.render(r,n[d]));l.outer&&(s=C(e,l.replaceRange))}I({opts:o,elements:s,name:t,source:"LI",params:{tagPrefix:l.tagPrefix,noTag:l.noTag}}),l["on-load"]&&eval.call(w,l["on-load"])}(t,n,a,r,o,l),o.postproc&&(a=w[o.postproc](a))})},opts:a||{}})},baseTrack:function(e,t,n,r){var i=n||{},a=r||function(){var t=i.fullRender?i.topLevelCss:e;return b.querySelectorAll(t).length>0};u.default.doWhenReady(a,function(){I({elements:C(e,i.replaceRange),name:t,source:"base",params:{tagPrefix:i.tagPrefix,noTag:i.noTag}})})},abSlice:L,abTestSlice:function(e){if(e){var t=l.default.getParam(e,"callback","function");if(t)return t(L())}},sendItem:function(e){if(a.default.inventory.collect)console.log("LI: Default scraping is turned on. Turn off automatic scraping");else{var t=e||{},n=a.default.inventory.mandatoryFeatures,i=h.default.toQueryString(o.default.basicParam(null)),s=a.default.inventory.inventoryServer+"/"+a.default.inventory.inventoryApiVersion+"/__inventory.gif?"+i;for(var l in t)if(t.hasOwnProperty(l)){var u=r(t[l]);if("string"===u||"number"===u)t[l]=t[l];else if(void 0===t[l])console.log("LI: The field with key "+l+" is undefined. Removing the field"),delete t[l];else if(!(t[l].length>=0))throw"LI: LI only accepts String, Number, or array of Strings for object values"}for(var d=0;d<n.length;d++)if(!t[n[d]])throw"LI: You are missing the following feature for your metadata: "+n[d];void 0!==t&&Object.keys(t).length>1&&(s+="&item="+encodeURIComponent(JSON.stringify(t)),s+=void 0===a.default.inventory.version?"":"&ver="+a.default.inventory.version,(new Image).src=s)}},setHist:function(e){a.default.sdk.manualHist?e instanceof Array?a.default.sdk.manualHist=e:console.log("LI: Given argument is not an array."):console.log("LI: Turn off the automatic history tracking")},setContext:function(e){a.default.customContext=e;var t=s.default.getMaybeExtendSdkFunctions("setContext");t&&a.default.customContext.id&&(a.default.customContext.id=t(a.default.customContext.id))},optOut:function(e){a.default.claimedGid="donottrack",!1===e&&(a.default.uid="donottrack",g.default.createCookie(a.default.permKey,"donottrack",7300)),d.default.send("opt_out",{})},optBack:function(){a.default.claimedGid=m.default.randomStringGid(20),g.default.setUserId(l.default.generateUUID()),d.default.send("opt_back",{optback:"1"})},trackThrice:function(e){I(e),window.setTimeout(function(){return I(e)},200),window.setTimeout(function(){return I(e)},400)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(5)),a=f(n(8)),o=f(n(1)),s=f(n(9)),l=f(n(3)),u=f(n(7)),d=f(n(10)),c=f(n(2));f(n(23));function f(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window;var p=document;function h(e,t,n,a,s){try{var u=a||"li";n&&console.debug("LI: you are in anchor at time: "+o.default.getNowOrTime());var d=e.href;if(d){var f;e.href=i.default.replaceParams(d,(g(f={},u+"_source",t.source),g(f,u+"_medium",t.w),g(f,u+"_pl",t.pl),g(f,u+"_tr",t.tr),f))}else{var p="Error tagging anchor at position "+s+' when invoking the $p("track",...) function. The tracked anchor did not have any href element. Anchor information: '+JSON.stringify(e),h="Source: "+(t.source||"")+"; Widget: "+(t.w||"")+"; "+p;r.default.showLiveWarnings&&console.log("LI: "+h),c.default.updateErrorMessagesByEventType("widget_tracking_error",h),n&&alert("widget_tracking_error for "+name+":"+t.source+": missing href at position "+s),l.default.send("widget_tracking_error",o.default.mergeMap(t,{errs:"Tracked anchor at position "+s+" has no href so cannot be tagged",fullErrorDetails:p}))}}catch(e){p="Error tagging anchor at position "+s+' when invoking the $p("track",...) function. This usually happens when we are unable to find any anchors in the tracked area. It could be because you are tracking the incorrect area, or it could be because the content loads dynamically. Click tracking may still work but we won\'t be able to determine the click URL. Error:'+e;n&&alert("widget_tracking_error for "+name+":"+t.source+"; error: "+e),l.default.send("widget_tracking_error",o.default.mergeMap(t,{errs:""+e})),c.default.updateErrorMessagesByEventType("widget_tracking_error",p),console.log("LI: "+p+e.stack)}}function m(e,t,n,i){var a=n.tType||"widget",o=n.w||"default-widget",s=a+"_click";try{var u=n.clickUrl||"";if(r.default.sdk.stripParamsWhenCheckingVisibleItems&&(u=(n.clickUrl||"").split("?")[0].split("#")[0]),-1!=c.default.clickUrls.indexOf(u)){var d="";return r.default.sdk.stripParamsWhenCheckingVisibleItems&&(d="after trimming"),console.log("LI: A duplicate click event was detected for the url "+(n.clickUrl||"")+", "+d+": "+u+", when comparing against the list, hence not sending the duplicate click",c.default.clickUrls),void c.default.duplicatesDetected.push(s)}if(window.performance&&window.performance.now&&"function"==typeof window.performance.now&&c.default&&c.default.tsplsByEventType&&c.default.tsplsByEventType.widget_click&&window.performance.now()-c.default.tsplsByEventType.widget_click[c.default.tsplsByEventType.widget_click.length-1]<100){s+="_likely_duplicate",c.default.duplicatesDetected.push(s),console.log("LI: We detected a click event within less than 100 ms after the previous click event. The widget name is "+o+" and source is "+(n.source||"")),n.errs="Click less than 100 ms after last click on different url";var f="Time gap: "+(window.performance.now()-c.default.tsplsByEventType.widget_click[c.default.tsplsByEventType.widget_click.length-1])+" ms; previous clickUrl = "+c.default.clickUrls[c.default.clickUrls.length-1]+"; current clickUrl = "+u;console.log("LI: "+f),n.fullErrorDetails=f}c.default.clickUrls.push(u)}catch(e){console.log("LI: Encountered unexpected error when checking for duplicate click event, continuing anyway",e)}try{window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(c.default.timing.clickTimes[o]=0|window.performance.now(),n.tsv=(c.default.timing.clickTimes[o]||0)-(c.default.timing.visibleTimes[o]||0),n.tss=(c.default.timing.clickTimes[o]||0)-(c.default.timing.shownTimes[o]||0))}catch(e){console.log("LI: Encountered unexpected error when adding performance information to visible event: ",e)}i&&alert("click for "+n.w+":"+n.source),l.default.sendRobust(s,n)}function y(e,t,n,i){return[].concat.apply([],e.map(function(e){var a=Array.prototype.slice.call(e.querySelectorAll("a"));if("A"==(e.tagName||e.nodeName||""))a.push(e);else if(0!=a.length||r.default.sdk.allowTrackingWithoutAnchor)0==a.length&&a.push(e);else{var o="tried tracking element with no anchor";i&&alert("widget_tracking_error on element for "+t+":"+n),r.default.showLiveWarnings&&console.log("LI: widget_tracking_error: "+o+"; widgetName = "+t+", source = "+n),l.default.send("widget_tracking_error",{errs:o,w:t,source:n}),c.default.updateErrorMessagesByEventType("widget_tracking_error",o)}return a}))}var v={},w={};t.default={widgets:{},onClick:m,track:function(e){var t=e.params||{},n=o.default.getParam(e,"name","string"),i="string"==typeof e.placement?e.placement:null,f="string"==typeof e.treatment?e.treatment:null;c.default&&c.default.mostRecentTrackingObject&&(c.default.mostRecentTrackingObject[n]=o.default.mergeMap(e,{}));var g=o.default.getParam(e,"source","string"),b=e.opts||{},k=e._debug||r.default.sdk.debugTrack;if(!g){var T="Error in calling LiftIgniter track function; no source parameter specified. The tracking will not be executed and the associated widget_shown, widget_visible, and widget_click events will not fire";return k&&alert("widget_tracking_error (missing source) for "+n),l.default.send("widget_tracking_error",o.default.mergeMap(b,{errs:"source parameter not specified in track function, so not tracking this widget",w:n})),r.default.showLiveWarnings&&console.log("LI: "+T),void c.default.updateErrorMessagesByEventType("widget_tracking_error",T)}var _=e.elements;if(!(_&&_.length&&_.length>0))return T="Error in calling LiftIgniter track function for "+n+". There appear to be no elements to track",k&&alert("widget_tracking_empty_list for "+n+":"+g),l.default.send("widget_tracking_empty_list",o.default.mergeMap(b,{errs:"No elements to track, so not executing the track function",w:n,source:g})),r.default.showLiveWarnings&&console.log("LI: "+T),void c.default.updateErrorMessagesByEventType("widget_tracking_empty_list",T);_=Array.prototype.slice.call(_);var I=a.default.getWidgetData(),S=[];if(function(e,t,n,i,a,o){return y(e,i,a,o).map(function(e){return r.default.trackingTransURL(e.href)}).filter(function(e){return e&&t.test(e)}).filter(function(e){return(!n||!n.test(e))&&e})}(_,new RegExp(I.itemRegex)||/.*/,I.itemExcludeRegex?new RegExp(I.itemExcludeRegex):void 0,n,g,k).forEach(function(e){S.indexOf(e)<0&&S.push(r.default.trackingTransURL(e))}),!r.default.sdk.failTrackUntilNewVisibleItemsInSpaPageReset||function(e,t){if(c.default.shownVisibleItemsByWidgetName[e]){var n=t.map(function(e){return e=o.default.removeURLParameter(e,"li_source"),e=o.default.removeURLParameter(e,"li_medium")});return c.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e]?c.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e].toString()!=n.toString()&&(delete c.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e],!0):(c.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e]=n,!1)}return!0}(n,S)){var C=b.type||"widget",L="_shown";b.tType=C,b.source=g,b.w=n,b.pl=i,b.tr=f;var x=function(e,t,n,i,a){try{var s=e.map(function(e){return e&&r.default.sdk.stripParamsWhenCheckingVisibleItems?e.split("?")[0].split("#")[0]:e||""}),u=r.default.currentUrl;if(r.default.sdk.stripParamsWhenCheckingVisibleItems&&(u=r.default.currentUrl.split("?")[0].split("#")[0]),r.default.sdk.removeCurrentUrlFromVisibleItems&&(s=s.filter(function(e){return e!=u})),s.indexOf(u)>-1&&!r.default.sdk.failIfCurrentItemTracked){var d="";1==e.length?(d="For the widget "+t+" and source "+n+", the only tracked href in the recommendation area is the same as the current url. This could mean either (a) a rendering error, where your links are pointing to the current page, namely "+r.default.currentUrl+" rather than to the intended recommended pages. This is usually due to an error in your template; or (b) a use of on-click overrides. Our tracking function uses the actual hrefs, so in the case of on-click overrides, our track function will not work",a&&alert("current_item_tracked (and nothing else tracked) for "+t+":"+n),l.default.send("current_item_tracked",o.default.mergeMap(i,{errs:"Only tracked visible item equals the current item. Tracking is likely incorrect"})),r.default.showLiveWarnings&&console.log("LI: "+d),c.default.updateErrorMessagesByEventType("current_item_tracked",d)):r.default.sdk.checkIfVisibleItemsIncludeCurrentUrl&&(d="For the widget "+t+" and source "+n+", the current url, namely "+r.default.currentUrl+", is one of the tracked hrefs, but not the only one. For a typical implementation, it should not be among the tracked hrefs at all, because you don't want to recommend a page as a recommendation on itself! Please check your rendering and tracking logic to check that you are linking to the intended recommended item and not to the current url",a&&alert("current_item_tracked (and other items tracked) for "+t+":"+n),l.default.send("current_item_tracked",o.default.mergeMap(i,{errs:"One of the tracked visible items equals the current item. Tracking is likely incorrect"})),r.default.showLiveWarnings&&console.log("LI: "+d),c.default.updateErrorMessagesByEventType("current_item_tracked",d))}return s}catch(t){return o.default.throwScriptError("LI: Unexpected error when checking for visible items duplicating current item, but continuing:",t),e}return e}(S,n,g,b,k);if(!(r.default.sdk.failIfCurrentItemTracked&&x.length<S.length)){r.default.sdk.removeCurrentUrlFromVisibleItems?S=x:r.default.sdk.filterVizByCssSelector&&(S=r.default.sdk.filterVizByCssSelector(S)),"_shown"==L&&r.default.sdk.timerBufferShown||function(e,t,n,i){r.default.sdk.checkItemsMismatch&&c.default.responseVisibleItemsByWidgetName&&c.default.responseVisibleItemsByWidgetName[t]&&JSON.stringify(c.default.responseVisibleItemsByWidgetName[t])!=JSON.stringify(e)&&(i&&alert("widget_tracking_items_mismatch for "+t),c.default.updateWarningMessagesByEventType("widget_tracking_items_mismatch","widgetName = "+t),l.default.send("widget_tracking_items_mismatch",o.default.mergeMap(n,{errs:"Items tracked as shown did not match the items returned in the most recent response",vi:JSON.stringify(e.slice(0,r.default.sdk.maxVizItemsToSend)),responseVisibleItems:JSON.stringify(c.default.responseVisibleItemsByWidgetName[t])})),r.default.showLiveWarnings&&console.log("LI: For widget name "+t+", the visible items in the response returned by us did not match the visible items tracked as shown.\nThe visible item list for response was ("+c.default.responseVisibleItemsByWidgetName[t].length+" items): \n"+JSON.stringify(c.default.responseVisibleItemsByWidgetName[t])+"\nThe visible item list tracked as  shown was ("+e.length+" items): \n"+JSON.stringify(e.slice(0,r.default.sdk.maxVizItemsToSend))))}(S,n,b,k);try{window&&window.performance&&window.performance.now&&(!r.default.sdk.multiTrack&&c.default.timing.shownTimes[n]&&(0|window.performance.now())-c.default.timing.shownTimes[n]<r.default.sdk.timerShownLikelyDuplicate&&(0|window.performance.now())-c.default.timing.shownTimes[n]>r.default.sdk.timerBufferShown&&(c.default.duplicatesDetected.push(C+L),L="_shown_likely_duplicate"),c.default.timing.shownTimes[n]=0|window.performance.now(),b.st=c.default.timing.shownTimes[n])}catch(e){r.default.showLiveWarnings&&console.log("LI: Unexpected error when recording the current time",e)}if("search"!=C){if(c.default&&c.default.shownSourceMap&&g&&(c.default.shownSourceMap[g]=(c.default.shownSourceMap[g]||0)+1),c.default&&c.default.shownWidgetMap&&n&&(c.default.shownWidgetMap[n]=(c.default.shownWidgetMap[n]||0)+1),c.default&&c.default.shownVisibleItemsByWidgetName&&n&&(c.default.shownVisibleItemsByWidgetName[n]=S),null!=r.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName&&"LI"===g){var E=r.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName[b.w];E&&(S=c.default.responseVisibleItemsByWidgetName[E])}"_shown"==L&&r.default.sdk.timerBufferShown?(c.default.buffer.shown[n]||window.setTimeout(function(){c.default.buffer.shown[n]&&(k&&alert("shown for "+n+":"+g),l.default.send("widget_shown",c.default.buffer.shown[n]),c.default.buffer.shown[n]="")},r.default.sdk.timerBufferShown),c.default.buffer.shown[n]=o.default.mergeMap(b,{vi:JSON.stringify(S.slice(0,r.default.sdk.maxVizItemsToSend))})):(k&&alert("shown for "+n+":"+g),l.default.send(C+L,o.default.mergeMap(b,{vi:JSON.stringify(S.slice(0,r.default.sdk.maxVizItemsToSend))})))}else e.q&&(b.q=e.q);"widget"===C&&(k&&console.debug("LI: Going to attach visible listener at time: "+o.default.getNowOrTime()),r.default.sdk.addOnVisibleWhenTracking&&_[0]&&function(e,t,n,i,a,f){f&&console.debug("LI: Running addOnVisible at time: "+o.default.getNowOrTime());var g=a.type||"widget",h=(a.page,o.default.hashOpts(a));f&&console.debug("LI: optsHash",h),f&&console.debug("LI: this is test page value, ",a);var m=function(){if(f&&console.debug("LI: Running onVisible for widget "+t+" at time "+o.default.getNowOrTime(),e),d.default.isElementVisible(e)&&!v[h]){try{if(f&&console.debug("LI: Matched onVisible for widget "+t+" at time "+o.default.getNowOrTime(),e),window.performance&&window.performance.now){if(c.default.timing.visibleTimes&&c.default.timing.visibleTimes[t]&&(0|window.performance.now())-c.default.timing.visibleTimes[t]<500&&!r.default.sdk.multiTrack)return void console.log("LI: Duplicate widget_visible event detected for the widget "+t+" firing within "+((0|window.performance.now())-c.default.timing.visibleTimes[t])+" ms of the original event");c.default.timing.visibleTimes[t]=0|window.performance.now(),c.default&&c.default.visibleWidgetMap&&t&&(c.default.visibleWidgetMap[t]=(c.default.visibleWidgetMap[t]||0)+1),a.st=c.default.timing.shownTimes[t]||0,a.tss=(c.default.timing.visibleTimes[t]||0)-(c.default.timing.shownTimes[t]||0)}}catch(e){r.default.showLiveWarnings&&console.log("LI: Encountered unexpected error when adding performance information to visible event: ",e)}f&&alert("visible for "+t+":"+i.source),l.default.send(g+"_visible",o.default.mergeMap(o.default.mergeMap(i,a),{vi:JSON.stringify(n)})),v[h]=!0,r.default&&r.default.shown&&r.default.shown.active&&u.default.storeVisibleElements(n.slice(0,r.default.shown.vizCap))}else v[h]&&f&&console.debug("LI: Not tracking because already tracked!",h)};m(),s.default.addEvent(p,"DOMContentLoaded",d.default.debounce(m,250,!0)),s.default.addEvent(p,"load",d.default.debounce(m,250,!0)),s.default.addEvent(p,"resize",d.default.debounce(m,250,!0)),s.default.addEvent(p,"scroll",d.default.debounce(m,250,r.default.onVisibleImmediatelyAfterScroll)),setTimeout(m,500)}(_[0],n,S,b,b,k));var R=y(_,n,g,k);R=r.default.sdk.filterAnchorsByCssSelector(R),c.default&&c.default.mostRecentTrackedAnchors&&(c.default.mostRecentTrackedAnchors[n]=R);var O=e.tagPrefix||t.tagPrefix?e.tagPrefix||t.tagPrefix:"li",D=e.noTag||t.noTag||r.default.noTag||!1,A=e.noClick||t.noClick||!1;k&&R.forEach(function(e){console.debug("LI: a = "+e.href)});var M=0;R.forEach(function(e){if(null!=r.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName&&"LI"===g){var t=r.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName[b.w];t&&(S=c.default.responseVisibleItemsByWidgetName[t])}D||h(e,b,k,O,M),A||function(e,t,n,i){var a=r.default.trackingTransURL(e.href);if(null!=r.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName&&"LI"===n.source){var l=r.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName[n.w];l&&(a=c.default.responseVisibleItemsByWidgetName[l][0])}var u=o.default.mergeMap({clickUrl:a},n);"function"==typeof r.default.sdk.widgetAnalysis&&(u=r.default.sdk.widgetAnalysis(e,u)),s.default.addEvent(e,"click",function(e){u.trigger="click",m(0,0,u,i)}),s.default.addEvent(e,"contextmenu",function(e){u.trigger="contextmenu",m(0,0,u,i)})}(e,0,o.default.mergeMap(b,{vi:JSON.stringify(S.slice(0,r.default.sdk.maxVizItemsToSend))}),k),M+=1}),w[n]=!0}}}}},function(e,t,n){var r,i,a;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(n,o){"object"==typeof t&&t&&"string"!=typeof t.nodeName?o(t):(i=[t],void 0===(a="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=a))}(0,function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function r(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test;var s=/\S/;function l(e){return!function(e,t){return o.call(e,t)}(s,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var d=/\s*/,c=/\s+/,f=/\s*=/,g=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function h(e){this.string=e,this.tail=e,this.pos=0}function m(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.cache={}}h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},h.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},m.prototype.push=function(e){return new m(e,this)},m.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var i,o,s=this,l=!1;s;){if(e.indexOf(".")>0)for(t=s.view,i=e.split("."),o=0;null!=t&&o<i.length;)o===i.length-1&&(l=a(t,i[o])),t=t[i[o++]];else t=s.view[e],l=a(s.view,e);if(l)break;s=s.parent}n[e]=t}return r(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){this.cache={}},y.prototype.parse=function(t,r){var a=this.cache,o=a[t];return null==o&&(o=a[t]=function(t,r){if(!t)return[];var a,o,s,u=[],m=[],y=[],v=!1,w=!1;function b(){if(v&&!w)for(;y.length;)delete m[y.pop()];else y=[];v=!1,w=!1}function k(e){if("string"==typeof e&&(e=e.split(c,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(i(e[0])+"\\s*"),o=new RegExp("\\s*"+i(e[1])),s=new RegExp("\\s*"+i("}"+e[1]))}k(r||e.tags);for(var T,_,I,S,C,L,x=new h(t);!x.eos();){if(T=x.pos,I=x.scanUntil(a))for(var E=0,R=I.length;E<R;++E)l(S=I.charAt(E))?y.push(m.length):w=!0,m.push(["text",S,T,T+1]),T+=1,"\n"===S&&b();if(!x.scan(a))break;if(v=!0,_=x.scan(p)||"name",x.scan(d),"="===_?(I=x.scanUntil(f),x.scan(f),x.scanUntil(o)):"{"===_?(I=x.scanUntil(s),x.scan(g),x.scanUntil(o),_="&"):I=x.scanUntil(o),!x.scan(o))throw new Error("Unclosed tag at "+x.pos);if(C=[_,I,T,x.pos],m.push(C),"#"===_||"^"===_)u.push(C);else if("/"===_){if(!(L=u.pop()))throw new Error('Unopened section "'+I+'" at '+T);if(L[1]!==I)throw new Error('Unclosed section "'+L[1]+'" at '+T)}else"name"===_||"{"===_||"&"===_?w=!0:"="===_&&k(I)}if(L=u.pop())throw new Error('Unclosed section "'+L[1]+'" at '+x.pos);return function(e){for(var t,n=[],r=n,i=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,a=e.length;i<a;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(m))}(t,r)),o},y.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof m?t:new m(t);return this.renderTokens(r,i,n,e)},y.prototype.renderTokens=function(e,t,n,r){for(var i,a,o,s="",l=0,u=e.length;l<u;++l)o=void 0,"#"===(a=(i=e[l])[0])?o=this.renderSection(i,t,n,r):"^"===a?o=this.renderInverted(i,t,n,r):">"===a?o=this.renderPartial(i,t,n,r):"&"===a?o=this.unescapedValue(i,t):"name"===a?o=this.escapedValue(i,t):"text"===a&&(o=this.rawValue(i)),void 0!==o&&(s+=o);return s},y.prototype.renderSection=function(e,t,i,a){var o=this,s="",l=t.lookup(e[1]);if(l){if(n(l))for(var u=0,d=l.length;u<d;++u)s+=this.renderTokens(e[4],t.push(l[u]),i,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],t.push(l),i,a);else if(r(l)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,a.slice(e[3],e[5]),function(e){return o.render(e,t,i)}))&&(s+=l)}else s+=this.renderTokens(e[4],t,i,a);return s}},y.prototype.renderInverted=function(e,t,r,i){var a=t.lookup(e[1]);if(!a||n(a)&&0===a.length)return this.renderTokens(e[4],t,r,i)},y.prototype.renderPartial=function(e,t,n){if(n){var i=r(n)?n(e[1]):n[e[1]];return null!=i?this.renderTokens(this.parse(i),t,n,i):void 0}},y.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},y.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},y.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var v=new y;return e.clearCache=function(){return v.clearCache()},e.parse=function(e,t){return v.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return n(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return v.render(e,t,r)},e.to_html=function(t,n,i,a){var o=e.render(t,n,i);if(!r(a))return o;a(o)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return u[e]})},e.Scanner=h,e.Context=m,e.Writer=y,e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,a,o=g(n(18)),s=g(n(20)),l=g(n(0)),u=g(n(21)),d=g(n(1)),c=g(n(2)),f=n(6);function g(e){return e&&e.__esModule?e:{default:e}}function p(e){r?(console.debug("LI: tunnel response sent to parentOrigin "+i+" at time "+d.default.getNowOrTime(),e),r.postMessage(e,i)):l.default.debug&&console.debug("LI: Attempted to send a message through uninitialized tunnel",e)}function h(e){e.stopPropagation(),e.preventDefault();var t={response:"event",message:"listenEvent",identifier:a,selector:m(e.target),event:"onClick"};a+=1,p(t)}function m(e,t,n){function r(e){return document.querySelectorAll(e).length}function i(e){return e.map(function(e){return"."+e}).join()}function a(e){return function(t,n){return!e.includes(n)}}if(t=t||"",void 0===n&&(n=1/0),!e||e===document.body){for(var o=t.split(" ").filter(function(e){return e.trim().length}),s=[],l=o.length-2;l>=0;l--){var u=a(s.concat([l]));r(o.filter(u).join(" "))===n&&s.push(l)}return o.filter(a(s)).join(" ")}var d=e.className.split(" ").sort(function(e,t){return e.length-t.length}),c=e.tagName.toLowerCase(),f=e.id;if(f){var g=f.replace(/[^A-Za-z]/g,"").length,p="#"+f+" "+t,h=r(p);if(g>.8*f.length&&h<n)return m(e.parentElement,p,h)}for(var y=[],v=0;v<d.length;v++){var w=d[v];if(w.trim().length){var b=r(i(y.concat([w]))+" "+t);b<n&&(y.push(w),n=b)}}y.length&&(t=i(y)+" "+t);var k=y.length?c+t:c+" "+t;return r(k)<n&&(t=k),m(e.parentElement,t,n)}t.default={startTunnel:function(){var e=function(){var e=d.default.getNowOrTime();console.debug("LI: Starting actual tunnelFunc execution at time: "+e);try{window.addEventListener("message",function(e){if("http://localhost:8000"===e.origin||"https://dev.console.liftigniter.com"===e.origin||"https://prerelease.console.liftigniter.com"===e.origin||"https://console.liftigniter.com"===e.origin)if(e.data&&e.data.message)if(r||"init"===e.data.message){!function(e){var t=d.default.getNowOrTime();c.default.tunnelLog.push({data:e,callTime:t}),console.debug("LI: tunnel data",e),console.debug("LI: tunnel callTime",t)}(e.data);try{switch(e.data.message){case"init":!function(e,t,n){r?(r=t,i=n,void 0!==e.config?(l.default.serverConfig=e.config,console.debug("LI: Beginning tunnel initialization with config: ",e.config)):console.debug("LI: Beginning tunnel initialiation with the config of the JS file"),u.default.runBacklog(),window.addEventListener("beforeunload",function(){p({response:"event",message:"unload"})}),p({response:"success",message:"init",identifier:e.identifier||0,location:window.location.href,scrollWidth:document.body.scrollWidth,scrollHeight:document.body.scrollHeight,clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight,offsetWidth:document.body.offsetWidth,offsetHeight:document.body.offsetHeight})):(console.debug("LI: Attempted to initialize tunnel that has already been initialized"),p({response:"failure",message:"init",reason:"tunnel has already been initialized"}))}(e.data,e.source,e.origin);break;case"setConfig":!function(e){var t=e.config;for(var n in console.debug("LI: Beginning tunnel config hot reload using setConfig, new config object",t),t)t.hasOwnProperty(n)&&(l.default.serverConfig[n]=t[n]);console.debug("LI: Finished tunnel config hot reload, now re-rendering widgets if applicable"),s.default.loadExportables(),o.default.serveWidgets(null),p({response:"success",message:"setConfig",config:l.default.serverConfig})}(e.data);break;case"browserNavigate":!function(e){var t=e.operation;if("goto"==t){var n=(e.url.startsWith("http")?e.url:"http://"+e.url)+"?li-view-mode=console";window.location.href=n}else"refresh"==t?window.location.reload():"back"==t?window.history.back():"forward"==t&&window.history.forward()}(e.data);break;case"scrape":!function(e){var t=s.default.scrapeInventory();p({response:"success",message:"scrape",identifier:e.identifier||0,scrapedData:t})}(e.data);break;case"getWindow":!function(e){for(var t=Object.keys(window),n={},r=0;r<t.length;r++){var i=t[r];if(i.length>1&&window[i]&&window[i]!==window&&"function"!=typeof window[i])try{JSON.stringify(window[i])&&(n[i]=window[i])}catch(e){}}p({response:"success",message:"getWindow",window:JSON.stringify(n)})}(e.data);break;case"viewElements":!function(e){for(var t=document.querySelectorAll(e.selector),n=[],r=0;r<t.length;r++)n.push({innerHTML:t[r].innerHTML.toString(),outerHTML:t[r].outerHTML.toString()});p({response:"success",message:"viewElements",descriptor:e.descriptor||null,details:e.details||null,selector:e.selector||null,identifier:e.identifier||0,elements:n})}(e.data);break;case"highlight":!function(e){var t,n=e.anchor;n&&function(){var r=document.querySelectorAll(n),i=[];for(t=0;t<r.length;t++)i.push(Object.assign({},r[t].style)),Object.keys(e.style).forEach(function(n){r[t].style[n]=e.style[n]});p({response:"success",message:"highlight",identifier:e.identifier||0,selector:n,prevStyle:i})}()}(e.data);break;case"grow":!function(e){var t=e.selector;if(t){for(var n=document.querySelector(t);n&&n.parentElement;){var r=n.getBoundingClientRect(),i=n.parentElement.getBoundingClientRect();if((n=n.parentElement)===document.body||i.width>r.width||i.height>r.height)break}p({response:"success",message:"grow",selector:m(n),descriptor:e.descriptor})}else p({response:"failure",message:"grow",reason:"missing or empty selector",descriptor:e.descriptor})}(e.data);break;case"clean":!function(e){p({response:"success",message:"clean",value:(e.cleaners||[]).reduce(f.transformFeature,e.value||"")})}(e.data);break;case"listen":!function(e){1==e.on?(document.body.style.cursor="pointer",document.addEventListener?(a=0,document.addEventListener("click",h,!0)):document.attachEvent&&(a=0,document.attachEvent("click",h))):0==e.on&&(document.body.style.cursor=null,document.removeEventListener?document.removeEventListener("click",h,!0):document.detachEvent&&document.detachEvent("click",h)),p({response:"success",message:"listen",on:e.on,source:e.source||null,identifier:e.identifier||0})}(e.data)}}catch(t){d.default.throwScriptError("[WARN] LI: We encountered an unexpected script error tunneling with message: "+e.data.message,t),p({response:"failure",message:e.data.message,reason:t.stack||""})}}else console.debug("LI: Returning in tunnel because premature call on uninitialized browser-client",e.data.message);else console.debug("LI: Returning in tunnel because no message");else console.debug("LI: Returning in tunnel because origin is not whitelisted",e.origin)},!1)}catch(e){console.error("LI: Unable to create tunnel")}window.parent&&window.parent!==window?r=window.parent:window.opener&&window.opener!==window&&(r=window.opener),r&&(console.debug("LI: Sending requestInit message at time "+d.default.getNowOrTime()),r.postMessage({response:"event",message:"requestInit"},"*"))};document.readyState?e():window.addEventListener?window.addEventListener("load",e):window.attachEvent("onload",e)},sendUrlChange:function(){p({response:"event",message:"urlChange",location:window.location.href})},sendWidgetDiagnostic:function(e){p({message:"widgetDiagnostics",diagnostic:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(16)),i=f(n(0)),a=f(n(14)),o=f(n(1)),s=f(n(6)),l=f(n(2)),u=n(34),d=f(n(25)),c=f(n(26));function f(e){return e&&e.__esModule?e:{default:e}}var g=50,p=40,h=["click","visible"],m={};function y(e,t,n,r){return"disabled"==e.view?(n.widgetInfo(r,{status:"not rendered",reason:"This widget is currently set as disabled"}),!0):"disabled"==t&&(n.widgetInfo(r,{status:"not rendered",reason:"The widget is disabled because li-view-mode=disabled in the URL"}),!0)}function v(e,t,n){var r=window.location.href;return e.includeRegex&&null===r.match(e.includeRegex)?(t.widgetInfo(n,{status:"not rendered",reason:"The url did not match the widget include regex"}),!1):e.excludeRegex&&null!==r.match(e.excludeRegex)?(t.widgetInfo(n,{status:"not rendered",reason:"The url matched the widget exclude regex"}),!1):e.requiredSelector&&null===document.querySelector(e.requiredSelector)?(t.widgetInfo(n,{status:"not rendered",reason:"The page is missing the required selector: "+e.requiredSelector}),!1):!i.default.inventory.requiredDataLayer||i.default.inventory.requiredDataLayer(e)}function w(e,t,n,s,l){var u=o.default.getURLParameter("li-view-mode"),f=m[s.name];d.default.addCss(s.name,s.css);var h=null;h=s.newWidget?function(e,t){return o.default.waitOnSelect(e.newWidget.selector,g,p).then(function(n){null!==n?d.default.addHTML(n,e.newWidget.insertionType,e.newWidget.template):t.widgetInfo(e.name,{status:"not rendered",reason:"Widget selector was not found"})})}(s,l):o.default.nullPromise();var y=i.default.sdk.widgetHasVaryingLength?1:s.maxCount,v=i.default.sdk.waitForATagsOnWaitForSelectAll?n.selector+"> a":n.selector;h.then(function(){return o.default.waitOnSelectAll(v,g,p,y)}).then(function(g){if(i.default.sdk.transformBaseHTML&&(i.default.sdk.transformBaseHTML(n,s),g=document.querySelectorAll(n.selector)),null!==g&&g.length>0){var p=function(e,t,i){var a=r.default.render(w,e),o=void 0;if("replaceOuter"===i){var s=document.createElement("div");s.innerHTML=a,o=s.firstChild,t.parentNode.replaceChild(o,t)}else"replace"===i?(t.innerHTML=a,o=t):(t.insertAdjacentHTML(i,a),o=t);return f&&f.selector!=n.selector&&(o.style.outline="4px dashed #fc8813"),o},h="true"===s.params.outer;if(f&&f.selector!==n.selector)for(var y=document.querySelectorAll(f.selector),v=0;v<y.length&&v<f.elements.length;v++)y[v].parentNode.replaceChild(f.elements[v],y[v]),f.elements[v].style.outline=null;"console"!=u||f&&f.selector==n.selector||(m[s.name]={selector:n.selector,elements:Array.from(g).map(function(e){return e.cloneNode(!0)})});var w=o.default.replaceDotsInTemplate(s.template||s.itemTemplate);if(Boolean(s.isNewWidget)!=(null!=n.insertionType))return void l.widgetInfo(s.name,{status:"not rendered",reason:"Error: rec unit and placement are incompatible: recUnit.isNewWidget="+s.isNewWidget+" but placement.insertionType="+n.insertionType});var b=[];if(s.isNewWidget){var k=g[0],T=e.items.map(function(e){return o.default.replaceDotsInObject(i.default.sdk.autoRenderItemTransform(e))});b.push(p({items:T},k,n.insertionType))}else for(v=0;v<g.length&&v<e.items.length;v++){var _=o.default.replaceDotsInObject(i.default.sdk.autoRenderItemTransform(e.items[v]));b.push(p(_,g[v],h?"replaceOuter":"replace"))}b.length>e.items.length&&!s.isNewWidget&&l.addWarning(s.name,"There were fewer items recommended than slots available"),a.default.track({elements:b,name:s.name,source:"LI",placement:n.id,treatment:s.name})}else l.widgetInfo(s.name,{status:"not rendered",reason:"No item selectors were found"});d.default.addScript(s.name,s.script),l.sendDiagnostic(s.name);var I={pageGroupId:t.id,slotId:n.id};c.default.widgetRenderedCallback(I,s.name)})}function b(e,t,n,r,u){var d=a.default.abSlice(),f=void 0;if(i.default.sdk.autoRenderCustomAbSlice){i.default.sdk.autoRenderCustomAbSlice(t).then(function(e){var n=!1,r=!1;"LI"===e?(f=t.slices.filter(function(e){return"base"!==e.widgetName})[0],n=!0,r=!0):"base"===e&&(f=t.slices.filter(function(e){return"base"===e.widgetName})[0],n=!0),n&&(v(),l.default.allowRegister=!1,r&&a.default.fetch())})}else{for(var h=0,y=0;h<t.slices.length&&!(d<(y+=(f=t.slices[h]).probability));h++);v()}function v(){var l=n[f.widgetName];if(f.widgetName!=k){var d=document.querySelectorAll(t.selector).length,h=i.default.sdk.widgetHasVaryingLength&&d>0?d:l.maxCount;a.default.register({max:h,widget:f.widgetName,opts:s.default.fetchDynamicParams(l.params),callback:function(n){return w(n,e,t,l,r)}})}else{l=n[u],r.widgetInfo(u,{status:"not rendered",reason:"The A/B testing slice is falling on the base slice"}),r.sendDiagnostic(u);var y=m[l.name];if(y){for(var v=document.querySelectorAll(y.selector),b=0;b<v.length&&b<y.elements.length;b++)v[b].parentNode.replaceChild(y.elements[b],v[b]);m[l.name]=null}if(!l.isNewWidget&&null==l.newWidget)o.default.waitOnSelectAll(t.selector,g,p,l.maxCount).then(function(n){a.default.track({elements:n,name:u,source:k,placement:t.id,treatment:l.name});var r={pageGroupId:e.id,slotId:t.id};c.default.widgetRenderedCallback(r,k)})}}}var k="base";t.default={serveWidgets:function(e){var t=o.default.getURLParameter("li-view-mode"),n=!1,r=void 0,s=void 0,d=i.default.serverConfig.exportable;if(r=d.pageGroups,(s=d.widgets)&&(!r||!r.length)){var f=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r],a=i.name,o=i.params,s=i.css,l=i.itemTemplate,u=i.script,d=i.maxCount,c=i.newWidget,f={name:a,params:o,css:s,itemTemplate:l,script:u,maxCount:d,newWidget:c};n.push(f);var g=void 0,p=i.name,h=i.uuid,m=i.view,y=i.selector,v=i.trigger,w=i.testFraction,b=[{probability:w,widgetName:i.name},{probability:100-w,widgetName:k}],T=h,_={id:T,name:p,view:m,selector:y,trigger:v,slices:b};g=[_];var I=i.uuid,S=i.name,C=i.includeRegex,L=i.excludeRegex,x=i.requiredSelector,E=I,R={id:E,name:S,includeRegex:C,excludeRegex:L,requiredSelector:x,slots:g};t.push(R)}return{pageGroups:t,widgets:n}}(s);r=f.pageGroups,s=f.widgets}if(r&&s){for(var g="console"==t,p=new u.RenderDiagnostics(g),m={},w=0;w<s.length;w++)m[s[w].name]=s[w];for(var T=0;T<r.length;T++){var _=r[T];if(null==e||e.pageGroupId==_.id)e:for(var I=0;I<_.slots.length;I++){var S=_.slots[I];if(null==e||e.slotId==S.id){for(var C=null,L=null,x=0;x<S.slices.length;x++){var E=S.slices[x],R=E.widgetName,O=E.probability;if(R!=k&&(null==L||O>L)&&(C=S.slices[x].widgetName,L=S.slices[x].probability),null==m[R]&&R!=k){p.addWidget(R),p.addWarning(R,"Widget code could not be found"),p.sendDiagnostic(R);continue e}}if(null!=C)if(null==e&&S.trigger&&-1!=h.indexOf(S.trigger.name)){var D={type:"renderWidgets",pageGroupAndSlot:{pageGroupId:_.id,slotId:S.id},trigger:S.trigger};c.default.registerEvent(D)}else y(S,t,p,C)||!v(_,p,C)?(p.addWidget(C),p.sendDiagnostic(C)):"live"==S.view||"console"==t?(n=!0,b(_,S,m,p,C)):"preview"==S.view&&"preview"==t&&(n=!0,b(_,S,m,p,C))}}}!1===i.default.serverConfig.exportable.shouldFetch&&(n=!1),n&&!i.default.sdk.overrideShouldFetch&&("console"!==t&&(l.default.allowRegister=!1),a.default.fetch())}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=0,i=0;function a(){var e=document.body;return document&&document.scrollTop||e&&e.scrollTop||0}function o(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight||0,t.scrollHeight||0,e.offsetHeight||0,t.offsetHeight||0,e.clientHeight||0,t.clientHeight||0)}function s(){var e=document.body,t=document.documentElement;return window.innerHeight||t.clientHeight||e.clientHeight||0}function l(){var e=(a()+s())/o()*100;return e>=100?100:e<=0?0:e}t.default={getDocHeight:o,getWinHeight:s,getVertScrollPos:a,getVertScrollPct:l,checkScroll:function(){var e=a();e>r&&(r=e);var t=l();t>i&&(i=Math.floor(t))},maxVertScrollPos:function(){return r},maxVertScrollPct:function(){return i},reset:function(){i=0,r=0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),i=c(n(5)),a=c(n(6)),o=c(n(1)),s=c(n(3)),l=c(n(2)),u=c(n(13)),d=c(n(9));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){l.default.inventoryData.scrapingAborted=!0,l.default.inventoryData.scrapingAbortReason=e,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(l.default.inventoryData.timing.scrapeAbort=0|window.performance.now())}function g(){try{if(h(),window.performance&&window.performance.now&&"function"==typeof window.performance.now&&window.performance.now()>2e4){var e="LI: Scraping took "+(0|window.performance.now())+' milliseconds, more than the threshold of 10 seconds. Run $p("runDiagnostics") and look at [DEBUG] Inventory data for more timing information',t=10*(window.performance.now()/1e4|0);r.default.showLiveWarnings&&console.log(e),r.default.sdk.checkIfScrapingDelayed&&s.default.send("scraping_delayed",{errs:"Scraping took more than "+t+" seconds, but less than "+(t+10)+" seconds"})}}catch(t){e="LI: Error in inventory collection: "+t+"; please check the JSON formatting for metadata; you can check formatting at http://jsonlint.com";r.default.showLiveWarnings&&console.log(e),s.default.send("scraping_fail",{errs:""+t}),l.default.updateErrorMessagesByEventType("scraping_fail",e)}}function p(){l.default&&l.default.inventoryData&&(l.default.inventoryData.scrapingStarted=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(l.default.inventoryData.timing.scrapeStart=0|window.performance.now()));var e=r.default.inventory.collectOpenGraph?a.default.scrapeOpenGraph():{};if(r.default.inventory.collectOpenGraph&&r.default.inventory.collectOpenGraphOnly)for(var t=0;t<r.default.inventory.mandatoryOpenGraphFeatures.length;t++)if(void 0===e[r.default.inventory.mandatoryOpenGraphFeatures[t]])return r.default.debug&&console.debug("LI: You are missing the following Open Graph feature for your metadata: "+r.default.inventory.mandatoryOpenGraphFeatures[t]),f("missing open graph feature: "+r.default.inventory.mandatoryOpenGraphFeatures[t]),{status:"aborted",reason:"missing open graph feature: "+r.default.inventory.mandatoryOpenGraphFeatures[t]};var n=r.default.inventory.features;if(n)for(t=0;t<n.length;t++){var i=n[t];(u=a.default.scrapeFeature(i))&&u.length>0&&(e[i.name]=u)}for(var s in e.title||(e.title=[a.default.getTitleFallback()]),e.url=[a.default.getCanonicalUrl()],e){if(e.hasOwnProperty(s))(void 0===(u=e[s])||null===u||u.length<=0)&&delete e[s]}for(var s in r.default.inventory.collectJSON&&(e=o.default.mergeMap(e,a.default.scrapeJSON())),e){var u;if(e.hasOwnProperty(s))void 0!==(u=e[s])&&null!==u||delete e[s]}for(t=0;t<r.default.inventory.mandatoryFeatures.length;t++)if(void 0===e[r.default.inventory.mandatoryFeatures[t]])return r.default.debug&&console.debug("LI: You are missing the following feature for your metadata: "+r.default.inventory.mandatoryFeatures[t]),f("missing feature: "+r.default.inventory.mandatoryFeatures[t]),{status:"aborted",reason:"missing feature: "+r.default.inventory.mandatoryFeatures[t]};var d=r.default.inventory.itemRegex,c=r.default.inventory.excludeRegex;if(d&&e[r.default.inventory.id]&&e[r.default.inventory.id][0]&&null===e[r.default.inventory.id][0].match(d))return r.default.debug&&console.debug("LI: The item being scraped, with "+r.default.inventory.id+" field having value "+e[r.default.inventory.id][0]+", violated the condition that this value should match the regex "+d),f("item being scraped "+e[r.default.inventory.id][0]+" did not match itemRegex "+d),{status:"aborted",reason:"item being scraped "+e[r.default.inventory.id][0]+" did not match itemRegex "+d};if(c&&e[r.default.inventory.id]&&e[r.default.inventory.id][0]&&null!==e[r.default.inventory.id][0].match(c))return r.default.debug&&console.debug("LI: The item being scraped, with "+r.default.inventory.id+" field having value "+e[r.default.inventory.id][0]+", violated the condition that this value should not match the regex "+c),f("item being scraped "+e[r.default.inventory.id][0]+" matched excludeRegex "+c),{status:"aborted",reason:"item being scraped "+e[r.default.inventory.id][0]+" matched excludeRegex "+c};var g=r.default.inventory.filters;if(g&&e)for(t=0;t<g.length;t++)if((e[g[t].name]||[]).indexOf(g[t].value)>=0){if("true"!=g[t].negate)return r.default.debug&&console.debug("LI: The item being scraped, with "+r.default.inventory.id+" field having value "+e[r.default.inventory.id][0]+", is being filtered out because the field with name "+g[t].name+" includes the value "+g[t].value),f("Failed filter: field with name "+g[t].name+" had value "+g[t].value),{status:"aborted",reason:"Failed filter: field with name "+g[t].name+" had value "+g[t].value}}else if("true"==g[t].negate)return r.default.debug&&console.debug("LI: The item being scraped, with "+r.default.inventory.id+" field having value "+e[r.default.inventory.id][0]+", is being filtered out because the field with name "+g[t].name+" does not include the value "+g[t].value),f("Failed filter: field with name "+g[t].name+" did not have value "+g[t].value),{status:"aborted",reason:"Failed filter: field with name "+g[t].name+" did not have value "+g[t].value};return l.default&&l.default.inventoryData&&(l.default.inventoryData.scrapingFinished=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(l.default.inventoryData.timing.scrape=0|window.performance.now())),{status:"success",item:e}}function h(){l.default&&l.default.inventoryData&&(l.default.inventoryData.collectStarted=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(l.default.inventoryData.timing.collectStart=0|window.performance.now()));var e=u.default.toQueryString(i.default.basicParam(null)),t=r.default.inventory.inventoryServer+"/"+r.default.inventory.inventoryApiVersion+"/__inventory.gif?"+e,n=p();"success"==n.status&&Object.keys(n.item).length>1&&(t+="&item="+encodeURIComponent(JSON.stringify(n.item)),t+=void 0===r.default.inventory.version?"":"&ver="+r.default.inventory.version,t+="&ttl="+r.default.inventory.ttl,(new Image).src=t,l.default&&l.default.inventoryData&&(l.default.inventoryData.inventorySent=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(l.default.inventoryData.timing.send=0|window.performance.now())))}t.default={collect:h,loadExportables:function(){if(r.default.inventory.loadExportables){!1===r.default.serverConfig.exportable.inventoryCollect&&(r.default.inventory.collect=!1);var e=r.default.serverConfig.exportable.scrapedFields;if(e)for(var t=0;t<e.length;t++){var n=!1;if(r.default.inventory.features){for(var i=0;i<r.default.inventory.features.length;i++)if(r.default.inventory.features[i].name==e[t].name){n=!0,r.default.inventory.features[i]=e[t];break}}else r.default.inventory.features=[];n||r.default.inventory.features.push(e[t])}r.default.serverConfig.exportable.mandatoryScrapeFeatures&&(r.default.inventory.mandatoryFeatures=r.default.serverConfig.exportable.mandatoryScrapeFeatures),r.default.serverConfig.exportable.includeInventoryRegex&&(r.default.inventory.itemRegex=r.default.serverConfig.exportable.includeInventoryRegex),r.default.serverConfig.exportable.excludeInventoryRegex&&(r.default.inventory.excludeRegex=r.default.serverConfig.exportable.excludeInventoryRegex)}},scrapeInventory:p,collectInventoryWhenReady:function(){d.default.domComplete(function(){var e=0;l.default.startupTimes.initEndTime||(e=1e3),r.default.inventory.minTimeToWaitAfterDomComplete&&l.default.startupTimes.initEndTime<r.default.inventory.minTimeToWaitAfterDomComplete&&(e=r.default.inventory.minTimeToWaitAfterDomComplete),window.setTimeout(function(){g()},e)})},safelyCollectInventory:g}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n(0)),i=_(n(4)),a=_(n(7)),o=_(n(27)),s=_(n(9)),l=_(n(8)),u=_(n(3)),d=_(n(19)),c=_(n(11)),f=(_(n(15)),_(n(10))),g=_(n(5)),p=_(n(6)),h=_(n(20)),m=_(n(14)),y=_(n(1)),v=_(n(2)),w=_(n(17)),b=_(n(18)),k=_(n(26)),T=_(n(35));function _(e){return e&&e.__esModule?e:{default:e}}function I(){console.log("LI: JavaScript SDK is not activated.")}t.default={start:function(e){(T.default.isConsoleReferrer()||T.default.isConsoleChild())&&(console.debug("LI: Setting state to console mode based on isConsoleReferrer() or isConsoleChild()"),T.default.setStateToConsoleMode()),r.default.serverConfig=e,"console"==g.default.getParam("li-view-mode")?(console.debug("LI: Starting tunneling. This will allow for communication with the LiftIgniter console"),w.default.startTunnel()):this.runBacklog()},runBacklog:function(){var e=this,t=r.default.pmVar,n=window[t].q||[];window[t]=function(){return e.processCall(arguments)};for(var i=0;i<n.length;i++)e.processCall(n[i],i)},recordAndLogCall:function(e,t){var n=y.default.getNowOrTime();"number"==typeof t?v.default.invocationLog.push({args:e,callTime:n,positionInBacklog:t}):v.default.invocationLog.push({args:e,callTime:n}),r.default.debug&&(console.debug("LI: $p function: ",y.default.makeACopy(e[0])),console.debug("LI: $p params: ",y.default.makeACopy(e.slice(1))),console.debug("LI: $p function call time: "+n),"number"==typeof t&&console.debug("LI: $p position in backlog: "+t))},processCall:function(e,t){var n=Array.prototype.slice.call(e);try{this.recordAndLogCall(n,t)}catch(e){r.default.showLiveWarnings&&console.log("LI: Unexpected error recording and logging call",e)}try{switch(n[0]){case"init":this.init.apply({},n.slice(1));break;case"send":return u.default.send.apply({},n.slice(1));case"sendOnce":return u.default.sendOnce.apply({},n.slice(1));case"sendRobust":return u.default.sendRobust.apply({},n.slice(1));case"collectInventory":h.default.collect.apply({},n.slice(1));break;case"setPushStateReset":f.default.setPushStateReset.apply({},n.slice(1));break;case"setOnHashChangeReset":f.default.setOnHashChangeReset.apply({},n.slice(1));break;case"printDebugInfo":this.printDebugInfo.apply({},n.slice(1));break;case"debug":r.default.debug=!0===n[1];break;case"resetPageview":return m.default.isActivated()?m.default.resetPageview.apply({},n.slice(1)):I();case"setSessionId":return m.default.isActivated()?i.default.setSessionId.apply({},n.slice(1)):I();case"setUserId":return m.default.isActivated()?i.default.setUserId.apply({},n.slice(1)):I();case"userId":return m.default.isActivated()?m.default.userId.apply({},n.slice(1)):I();case"getWidgetNames":return m.default.isActivated()?m.default.getWidgetNames.apply({},n.slice(1)):I();case"setRequestFields":m.default.isActivated()?m.default.setRequestFields.apply({},n.slice(1)):I();break;case"setRequestFieldsAON":m.default.isActivated()?m.default.setRequestFieldsAON.apply({},n.slice(1)):I();break;case"setArrayRequestFields":m.default.isActivated()?m.default.setArrayRequestFields.apply({},n.slice(1)):I();break;case"setMandatoryRequestFields":m.default.isActivated()?m.default.setMandatoryRequestFields.apply({},n.slice(1)):I();break;case"setMandatoryArrayRequestFields":m.default.isActivated()?m.default.setMandatoryArrayRequestFields.apply({},n.slice(1)):I();break;case"optOut":m.default.isActivated()?m.default.optOut.apply({},n.slice(1)):I();break;case"optBack":m.default.isActivated()?m.default.optBack.apply({},n.slice(1)):I();break;case"setGetQueryInfo":m.default.isActivated()?m.default.setGetQueryInfo.apply({},n.slice(1)):I();break;case"setNoTag":m.default.isActivated()?m.default.setNoTag.apply({},n.slice(1)):I();break;case"register":return m.default.isActivated()?m.default.register.apply({},n.slice(1)):I();case"fetch":return m.default.isActivated()?m.default.fetch.apply({},n.slice(1)):I();case"track":m.default.isActivated()?m.default.track.apply({},n.slice(1)):I();break;case"userHash":return m.default.isActivated()?m.default.userHash.apply({},n.slice(1)):I();case"abTestSlice":return m.default.isActivated()?m.default.abTestSlice.apply({},n.slice(1)):I();case"render":return m.default.isActivated()?m.default.render.apply({},n.slice(1)):I();case"renderCustomWidget":return m.default.isActivated()?m.default.renderCustomWidget.apply({},n.slice(1)):I();case"sendItem":return m.default.isActivated()?m.default.sendItem.apply({},n.slice(1)):I();case"setContext":return m.default.isActivated()?m.default.setContext.apply({},n.slice(1)):I();case"setPersistentConfig":return m.default.isActivated()?a.default.setPersistentConfig.apply({},n.slice(1)):I();case"getPersistentConfig":return m.default.isActivated()?a.default.getPersistentConfig():I();case"setPersistentQueryOpts":return m.default.isActivated()?a.default.setPersistentQueryOpts.apply({},n.slice(1)):I();case"getPersistentQueryOpts":return m.default.isActivated()?a.default.getPersistentQueryOpts():I();case"getHist":return m.default.isActivated()?r.default.getHistList.apply(r.default,n.slice(1)):I();case"getPageviewId":return m.default.isActivated()?r.default.pvid:I();case"setHist":return m.default.isActivated()?m.default.setHist.apply({},n.slice(1)):I();case"onload":return n[1]();case"monitorSearch":return m.default.isActivated()?m.default.monitorSearch.apply({},n.slice(1)):I();case"runDiagnostics":return v.default.runDiagnostics(n[1]||"log");case"abSlice":return m.default.abSlice()}}catch(t){y.default.throwScriptError("[WARN] LI: We encountered an unexpected script error running "+(e[0]||""),t)}},init:function(e,t){null==r.default.jsKey&&(t=t||{},r.default.jsKey=e,r.default.disabledCust[e]?console.log("LI: Thank you for using LiftIgniter! Your jsKey "+r.default.jsKey+" is disabled. If you are interested in re-activating our service, please contact us at support@liftigniter.com"):(window.$ps&&(v.default.startupTimes.beaconLoadStartTime=0|window.$ps),v.default.startupTimes.initStartTime=y.default.getNowOrTime(),l.default.maybeRunEarlyExtension(),!r.default.isInIframe&&window&&window.location&&window.location.origin&&""!=window.location.origin&&y.default.isBadActor(window.location.origin)||(s.default.addEvent(window,"scroll",f.default.debounce(d.default.checkScroll,100)),r.default.init(t.config),i.default.initializeCookies(),a.default.initializeStoredSettings(),h.default.loadExportables(),r.default.init(v.default.persistentConfig),c.default.initializeTimers(),o.default.initializeDurationEvents(),f.default.initializeNavigationEvents(),r.default.extensionOff||l.default.maybeRunExtension(),k.default.addCustomEvents(),b.default.serveWidgets(null),r.default.inventory.collect&&h.default.collectInventoryWhenReady(),u.default.keepCheckingBuffer(),v.default.startupTimes.initEndTime=y.default.getNowOrTime())))},printDebugInfo:function(e){var t=Array.prototype.slice.call(arguments);function n(e){try{return y.default.makeACopy(e)}catch(t){return console.log("object copy failed, error: "+t+", stack trace: "+(t.stack||"")),e}}switch(console.log("LI: Debug Info: <"+e+">. Args:"),console.log(t.slice(1)),console.log("Results:"),e){case"globalCtx":console.log(n(r.default.globalCtx||{}));break;case"config":console.log(n(r.default));break;case"serverConfig":console.log(n(r.default.serverConfig.exportable));break;case"fetchData":console.log(n(v.default.fetchData));break;case"inventoryData":console.log(n(v.default.inventoryData));break;case"invocationLog":console.log(n(v.default.invocationLog));break;case"tunnelLog":console.log(n(v.default.tunnelLog));break;case"scrapeFeature":console.log(p.default.scrapeFeature.apply({},t.slice(1)));break;case"scrapeInventory":console.log(h.default.scrapeInventory.apply({},t.slice(1)))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getCurrentTime:function(){return(new Date).getTime()},getTimezoneOffset:function(){return(new Date).getTimezoneOffset()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default={sendEvents:function(e,t){var n="",i="";t&&(n=t.w,i=t.source);var a=void 0;void 0!==r.default.googleAnalytics.globalFunction&&(a=window[r.default.googleAnalytics.globalFunction]);var o="LiftIgniter Recommendations";i&&(o+=" - "+i);var s=e;n&&(s+=" - "+n+" - "+i);var l="";t&&(l=t),r.default.googleAnalytics.markEventsAsNonInteraction&&(l?l.nonInteraction=!0:l={nonInteraction:!0}),void 0!==r.default.googleAnalytics.includeEvents&&-1==r.default.googleAnalytics.includeEvents.indexOf(e)||(void 0!==a?a(r.default.googleAnalytics.trackerName,"event",o,s,location.href,1,l):"undefined"!=typeof ga&&ga(r.default.googleAnalytics.trackerName,"event",o,s,location.href,1,l))}}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={addCss:function(e,t){var n=document.querySelector('style[data-li-widget-name="'+e+'"]');if(n&&n.parentNode.removeChild(n),t){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.setAttribute("data-li-widget-name",e),i.appendChild(document.createTextNode(t)),r.appendChild(i)}},addScript:function(e,t){var n=document.querySelector('script[data-li-widget-name="'+e+'"]');if(n&&n.parentNode.removeChild(n),t){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");i.innerHTML=t,i.setAttribute("data-li-widget-name",e),r.appendChild(i)}},addHTML:function(e,t,n){"replace"==t?e.innerHTML=n:e.insertAdjacentHTML(t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(0)),i=d(n(3)),a=d(n(14)),o=d(n(10)),s=d(n(6)),l=(d(n(25)),d(n(1))),u=d(n(18));function d(e){return e&&e.__esModule?e:{default:e}}var c=Element.prototype.matches||Element.prototype.msMatchesSelector,f=[];function g(e,t){document.addEventListener(e.name,function n(r){c.call(r.target,e.selector)&&(e.fireOnce&&document.removeEventListener(e.name,n,!0),t(r))},!0)}function p(e,t){"visible"==e.name?function(e,t){var n=function n(){var r=document.querySelector(e.selector);r&&o.default.isElementVisible(r)&&(document.removeEventListener("DOMContentLoaded",n,!0),document.removeEventListener("load",n,!0),document.removeEventListener("resize",n,!0),document.removeEventListener("scroll",n,!0),t())};document.addEventListener("DOMContentLoaded",n,!0),document.addEventListener("load",n,!0),document.addEventListener("resize",n,!0),document.addEventListener("scroll",n,!0)}(e,t):"click"==e.name?g(e,t):"mouseover"==e.name?g(e,t):"wait"==e.name?function(e,t){setTimeout(t,1e3*e.seconds)}(e,t):"rendered"==e.name?function(e,t){f.push({pageGroupAndSlot:e.pageGroupAndSlot,fireOnce:e.fireOnce,fired:!1,slice:e.slice,callback:t})}(e,t):"pageload"==e.name&&t()}function h(e){if(!1!==e.collectEvent&&function(e){var t=window.location.href;return(!e.includeRegex||null!==t.match(e.includeRegex))&&(!e.excludeRegex||null===t.match(e.excludeRegex))&&(!e.requiredSelector||null!==document.querySelector(e.requiredSelector))&&(!r.default.inventory.requiredDataLayer||r.default.inventory.requiredDataLayer())}(e)){var t=e.trigger;switch(e.type){case"activity":p(t,function(e){return function(t){i.default.sendRobust(e.type,s.default.fetchDynamicParams(e))}}(e.fields));break;case"modifyPage":p(t,function(e){return function(){var t=l.default.getURLParameter("li-view-mode");"disabled"==e.view||"disabled"==t||"live"==e.view||"console"==t||e.view}}(e));break;case"renderWidgets":p(t,function(e){return function(){u.default.serveWidgets(e.pageGroupAndSlot)}}(e));break;case"track":p(t,function(e){return function(){a.default.track({elements:e.selector,name:e.widgetName,source:e.source})}}(e))}}}t.default={registerEvent:h,addCustomEvents:function(){var e=r.default.serverConfig.exportable.events;if(e)for(var t=0;t<e.length;t++)h(e[t])},widgetRenderedCallback:function(e,t){for(var n=0;n<f.length;n++){var r=f[n],i="all"==r.slice||r.slice==t;e.pageGroupId==r.pageGroupAndSlot.pageGroupId&&e.slotId==r.pageGroupAndSlot.slotId&&i&&(!0===r.fireOnce&&r.fired||(r.callback(),r.fired=!0))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(9)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o=window,s=0,l=i.default.loadedAt;function u(){l&&(s+=1*new Date-l,l=!1)}t.default={getDuration:function(){return s},stopDuration:u,initializeDurationEvents:function(){r.default.addEvent(o,"blur",function(){u()}),r.default.addEvent(o,"focus",function(){l=1*new Date})}}},function(e,t,n){"use strict";function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var a=Object.keys(Object(i)),o=0,s=a.length;o<s;o++){var l=a[o],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(n[l]=i[l])}}return n}e.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(e,t,n){"use strict";(function(t){var n=setTimeout;function r(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}o(t.promise,r)}else(1===e._state?o:s)(t.promise,e._value)})):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},i.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},i.all=function(e){return new i(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function a(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(t){a(e,t)},n)}r[e]=o,0==--i&&t(r)}catch(e){n(e)}}for(var o=0;o<r.length;o++)a(o,r[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=i}).call(this,n(30).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(31),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(24))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,a={},o=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){d(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&d(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){d(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(d,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return a[i]=o,r(i),i++},l.clearImmediate=u}function u(e){delete a[e]}function d(e){if(o)setTimeout(d,0,e);else{var t=a[e];if(t){o=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{u(e),o=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(24),n(32))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,u=[],d=!1,c=-1;function f(){d&&l&&(d=!1,l.length?u=l.concat(u):c=-1,u.length&&g())}function g(){if(!d){var e=s(f);d=!0;for(var t=u.length;t;){for(l=u,u=[];++c<t;)l&&l[c].run();c=-1,t=u.length}l=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||d||s(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(5)),a=f(n(8)),o=f(n(1)),s=f(n(3)),l=f(n(7)),u=(f(n(15)),f(n(2))),d=f(n(4)),c=(f(n(11)),f(n(13)));f(n(12));function f(e){return e&&e.__esModule?e:{default:e}}var g=window,p=document,h=o.default.size;function m(e,t,n){var i=o.default.getOrElse(u.default.fetchData.dedupQueue,n,[]),a=[],s=r.default.sdk.iden,l=r.default.isInIframe?document.referrer:r.default.currentUrl,d=r.default.activity.urlTransform(l);if(e.items)if(e.items.length)try{for(var c=0,f=0;c<e.items.length&&f<t;++c){var g=e.items[c][s]||"",p=o.default.djb2HashCode(g);if(("url"!=r.default.sdk.iden||g!=d)&&1!=i[p]){""!=n&&(i[p]=1);var h=o.default.makeACopy(e.items[c]);h.url=r.default.sdk.renderTransform(h.url),h.rank=++f,a.push(h)}}}catch(e){}else r.default.showLiveWarnings&&console.log("LI: Query response received from LiftIgniter was either empty or not of the proper type. This could be due to a timeout, network error, or server error. If you see this error repeatedly, contact support@liftigniter.com with full context.");else r.default.showLiveWarnings&&console.log("LI: The query response received from LiftIgniter did not have any items. This could be due to a timeout, network error, or server error. If you see this error repeatedly, contact support@liftigniter.com with full context.");return""!=n&&(u.default.fetchData.dedupQueue[n]=i),{items:a}}function y(e,t){var n={items:[]};if(u.default.fetchData&&u.default.fetchData.recs&&u.default.fetchData.recs[e.optsKey])try{n=m(u.default.fetchData.recs[e.optsKey],e.max,t)}catch(e){console.log('[ERROR] LI: Error returning deduplicated items in LiftIgniter fetch callback. Contact support@liftigniter.com with this error and also the results of $p("runDiagnostics") after running it in the console on this page',e),s.default.send("widget_request_error",{errs:e,fullErrorDetails:e.stack})}else console.log('[ERROR]: LI: Recommendations have disappeared between the time of returning them and running the callback function. This usually indicates conflicts between multiple fetches being done simultaneously. Contact support@liftigniter.com with this error and also the results of $p("runDiagnostics") after running it in the console on this page. State: ',u.default),u.default.updateErrorMessagesByEventType("widget_request_error","recs disappeared from map"),s.default.send("widget_request_error",{errs:"recs disappeared from map",fullErrorDetails:"State.fetchData (truncated to 1000 chars) = "+o.default.returnStringifiedOrFailure(u.default.fetchData||{}).slice(0,1e3)});var i=[];try{i=(n.items||[]).map(function(e){return e.url||""}).map(r.default.trackingTransURL)}catch(e){r.default.showLiveWarnings&&console.log("[WARN] LI: Error estimating visible items from response",e)}if(r.default.sdk){var a=0,l=0;try{window.performance&&window.performance.memory&&window.performance.memory.usedJSHeapSize&&(a=window.performance.memory.usedJSHeapSize),window.performance&&window.performance.memory&&window.performance.memory.totalJSHeapSize&&(l=window.performance.memory.totalJSHeapSize)}catch(e){r.default.showLiveWarnings&&console.log("LI: Unexpected error when running performance code",e)}u.default&&u.default.responseWidgetMap&&(u.default.responseWidgetMap[e.widget||""]=(u.default.responseWidgetMap[e.widget||""]||0)+1),u.default&&u.default.responseVisibleItemsByWidgetName&&(u.default.responseVisibleItemsByWidgetName[e.widget||""]=i),s.default.send("widget_response",{fst:e.fetchStartTime||0,fstr:e.fetchStartTimeRelative||0,pt:e.preparationTime||0,cl:e.clientLatency||0,usedJS:a,totalJS:l,w:e.widget||"",source:"LI",vi:JSON.stringify(i.slice(0,r.default.sdk.maxVizItemsToSend))})}try{r.default.customCallbackByWidget&&r.default.customCallbackByWidget[e.widget||""]?r.default.customCallbackByWidget[e.widget||""](n.items):r.default.customCallback&&r.default.customCallback(n.items)}catch(e){r.default.showLiveWarnings&&console.log("LI: Exception when checking for or executing custom callback: ",e)}e.callback(n)}function v(){var e=u.default.fetchData.calls;for(var t in e)u.default.fetchData.recsFetched||u.default.fetchData.recs[t]||u.default.fetchData.retried[t]||(r.default.showLiveWarnings&&console.log("LI: Recs have not been received for one of the keys, so we are retrying ",t),w(t,r.default.sdk.backupQueryServer))}function w(e,t){var n=u.default.fetchData.calls,f=u.default.fetchData.dedupMax;a.default.getWidgetData();if(n.hasOwnProperty(e)){var p=n[e],h=0;for(var m in p.dedupGroups)h+=f[m];if(r.default.sdk.stabilize&&p.opts&&p.opts.itemsToRank&&l.default.hasStoragesEnabled()&&l.default.sessStorage.getItem(o.default.djb2HashCode(JSON.stringify(p.opts.itemsToRank.sort())))){p.queryStartTime=o.default.getNowOrTime();var y=JSON.parse(l.default.sessStorage.getItem(o.default.djb2HashCode(JSON.stringify(p.opts.itemsToRank.sort()))));u.default.fetchData.recsFetched||b(y,p.opts,n)}else{p.queryStartTime=o.default.getNowOrTime();var v=Object.keys(p.fetchInfo);!function(e){var t=r.default.frontPageBoost?"ModelQ":void 0,n=e.serverName+"/"+r.default.sdk.queryApiVersion;"v3"===r.default.sdk.queryApiVersion&&(n+="/"+(e.opts.jsk||r.default.jsKey),d.default.hasCookiesEnabled()&&o.default.notABot()&&o.default.notOptOut()&&(n+="/"+encodeURIComponent(r.default.uid)));n+="/model";var a=i.default.forCurrentExample(t);a=function(e){e=e||{};try{var t=r.default.globalCtx;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}catch(e){r.default.showLiveWarnings&&console.log("LI: Error adding global context when making model query, the query will still proceed fine")}return e}(a),a=function(e,t){(t=t||{}).f=r.default.sdk.requestFields?r.default.sdk.requestFields:null,t.arf=r.default.sdk.arrayRequestFields?r.default.sdk.arrayRequestFields:null;var n=r.default.sdk.mandatoryRequestFields;t.mf=n&&n.length>0?n:null;var i=r.default.sdk.mandatoryArrayRequestFields;for(var a in t.marf=i&&i.length>0?i:null,t.fa=r.default.sdk.requestFieldsAON?r.default.sdk.requestFieldsAON:null,t.gqi=r.default.sdk.getQueryInfo?r.default.sdk.getQueryInfo:null,e.opts)e.opts.hasOwnProperty(a)&&(t[a]=e.opts[a]);return t.max=e.max?e.max:null,t.w=e.name?e.name:null,t}(e,a);var f=function(){if(-1!=g.location.search.indexOf("ig_exp_hash")){var e=parseInt(i.default.getParam("ig_exp_hash"));if(!isNaN(e)&&e<100&&e>=0)return e}}();a.forcedHash=isNaN(f)?null:f,a=function(e){try{return o.default.mergeMap(e,u.default.persistentQueryOpts)}catch(e){o.default.throwScriptError("Problem merging persistent query opts into query",e)}}(a=function(e){e=e||{};try{var t=null;l.default.hasStorageEnabled()&&(r.default.shown.active&&r.default.longHist.active?t=JSON.parse(l.default.getLongHist()).concat(JSON.parse(l.default.getFrequent())):r.default.longHist.active?t=JSON.parse(l.default.getLongHist()):r.default.shown.active&&(t=JSON.parse(l.default.getFrequent())),r.default.longHist.active||l.default.removeItem(r.default.longHistKey),r.default.shown.active||l.default.removeItem(r.default.shown.freqCapKey)),e.exc=t}catch(e){r.default.showLiveWarnings&&(console.log("LI: Error when trying to add some storage data into query, continuing anyway. Contact support@liftigniter.com if you notice this, including information on your browser."),console.log("LI: Error details",e))}return e}(a)),r.default.postQuery||(n+="?"+c.default.toQueryString(a),a=null);var p=function(){var e=!1,t=r.default.isInIframe?document.referrer:r.default.currentUrl;return t&&""!=t&&!r.default.isInIframe&&window&&window.location&&window.location.origin&&""!=window.location.origin&&(e=!0,o.default.isThirdPartyOrigin(window.location.origin)&&(e=!1)),0!=r.default.useThirdParty&&4!=o.default.androidVersionCheck()||(e=!1),e}();window&&window.location&&window.location.origin&&""!=window.location.origin&&!o.default.isBadActor(window.location.origin)&&c.default.thirdPartyFetch(n,0,function(t){try{e.callback(t,e)}catch(e){o.default.throwScriptError("queryServer successCallback unexpected exception",e)}},function(t,n){try{return function(e,t,n){r.default.showLiveWarnings&&(console.log("LI: error code: "+t),console.log("LI: error message: "+n));var i="error code: "+t+"; error message: "+n;t>=500||429==t||0==t||-2==t?(0==t&&(u.default.xhrBroken=!0),429==t&&d.default.hasCookiesEnabled()&&d.default.createCookie(r.default.botClassificationKey,"1",10,6e4),0!=t&&429!=t&&-2!=t||s.default.send("widget_request_error",{errs:i}),0==t||429==t?u.default.updateErrorMessagesByEventType("widget_request_error",i):u.default.updateErrorMessagesByEventType("widget_request_timeout",i),r.default.sdk.retry&&!u.default.fetchData.retried[e.optsKey]?(r.default.showLiveWarnings&&console.log("LI: Recs have not been received for one of the keys, so we are retrying",e.optsKey),u.default.fetchData.retried[e.optsKey]=!0,w(e.optsKey,r.default.sdk.backupQueryServer)):(u.default.fetchData.givenUp=!0,r.default.sdk.enableBackup?k():T())):(t>=400||t<0)&&(u.default.updateErrorMessagesByEventType("widget_request_error",i),s.default.send("widget_request_error",{errs:i}),u.default.fetchData.retried[e.optsKey]=!0,u.default.fetchData.givenUp=!0,r.default.sdk.enableBackup?k():T())}(e,t,n)}catch(e){o.default.throwScriptError("queryServer errorCallback unexpected exception",e)}},p,u.default.xhrBroken,a)}({name:1===v.length?v[0]:"default-widget",max:Math.max(p.max,h),opts:o.default.mergeMap(p.opts,{fetchInfo:JSON.stringify(p.fetchInfo)}),optsKey:e,serverName:t,callback:function(e,t){return b(e,t,n,p)}})}}}function b(e,t,n,i){u.default.fetchData.recsFetched||(e.items?(u.default.fetchData.recs[t.optsKey]&&r.default.showLiveWarnings&&console.log("LI: We are overwriting previously fetched recommendations. As a general rule, this should not happen."),u.default.fetchData.recs[t.optsKey]=e,h(u.default.fetchData.recs)==h(n)&&(u.default.fetchData.recsFetched=!0,r.default.rankFiddling&&r.default.rankFiddling(u.default.fetchData.fetchQueue),u.default.fetchData.fetchQueue.forEach(function(e){e.fetchStartTime=i.fetchStartTime,e.fetchStartTimeRelative=i.fetchStartTimeRelative,e.preparationTime=i.queryStartTime-i.fetchStartTimeRelative,i.queryEndTime=o.default.getNowOrTime(),i.clientLatency=i.queryEndTime-i.queryStartTime,e.clientLatency=i.clientLatency;var t=a.default.getWidgetData();t.widgets[e.widget]?y(e,t.widgets[e.widget].dedupGid||""):y(e,"0")}),u.default.checkpointAndClear("completed successfully"),r.default.sdk.stabilize&&t.opts&&t.opts.itemsToRank&&l.default.hasStorageEnabled()&&l.default.sessStorage.setItem(o.default.djb2HashCode(JSON.stringify(t.opts.itemsToRank.sort())),JSON.stringify(e)))):r.default.showLiveWarnings&&console.log("LI: Response does not seem to make sense, so punting"))}function k(){if(!u.default.fetchData.recsFetched){var e=a.default.getWidgetData(),t="backup_recs_"+r.default.jsKey;g[t]=function(t){var n=Math.max(u.default.fetchData.startTime+u.default.fetchData.timeout-o.default.getTime(),0);u.default.fetchData.givenUp&&(n=Math.min(n,1e3)),r.default.showLiveWarnings&&console.log("LI: Executing backup recs code after "+(o.default.getTime()-u.default.fetchData.startTime)+" ms of fetch with remainingTime = "+n+" ms"),g.setTimeout(function(){if(!u.default.fetchData.recsFetched){u.default.fetchData.recsFetched=!0,u.default.fetchData.fetchQueue.forEach(function(n){e.widgets[n.widget]?n.callback(m(t,n.max,e.widgets[n.widget].dedupGid)):n.callback(m(t,n.max,n.dedupGid||"0"))});s.default.send("timeout",{method:"backupRec",interval:u.default.fetchData.timeout,errs:"no response"}),u.default.updateErrorMessagesByEventType("timeout","Timed out after waiting for recommendations for "+u.default.fetchData.timeout+" milliseconds. Check the Network Panel for more details and check the console for any related error messages"),u.default.checkpointAndClear("completed with backup recs")}},n)};var n="//cdn.petametrics.com/backup_recs/"+r.default.jsKey,i=p.createElement("script");i.type="text/javascript",i.setAttribute("src",n),p.head.appendChild(i)}}function T(){if(!u.default.fetchData.recsFetched){u.default.fetchData.recsFetched=!0,u.default.fetchData.fetchQueue.forEach(function(e){e.onTimeout&&"function"==typeof e.onTimeout&&e.onTimeout()});var e=function(){var e="no response";u.default.errorMessagesByEventType.widget_request_timeout?e=u.default.errorMessagesByEventType.widget_request_timeout[u.default.errorMessagesByEventType.widget_request_timeout.length-1]||"":u.default.errorMessagesByEventType.widget_request_error&&(e=u.default.errorMessagesByEventType.widget_request_error[u.default.errorMessagesByEventType.widget_request_error.length-1]||"");return e}();s.default.send("timeout",{method:"onTimeout",interval:u.default.fetchData.timeout,errs:e}),u.default.updateErrorMessagesByEventType("timeout","Timed out after waiting for recommendations for "+u.default.fetchData.timeout+" milliseconds. Check the Network Panel for more details and check the console for any related error messages"),u.default.checkpointAndClear("timed out")}}t.default={register:function(e){u.default.initializeFetchVariables(),o.default.getParam(e,"max","number"),o.default.getParam(e,"callback","function");var t=o.default.getParam(e,"widget","string")||"default-widget",n=a.default.getWidgetData();if(n.widgets&&n.widgets[t]){var i=n.widgets[t].opts||{};e.opts=e.opts||{},e.opts=o.default.mergeMap(i,e.opts)}switch(e.itemsToRank&&(e.opts=e.opts||{},e.opts.itemsToRank=JSON.stringify(e.itemsToRank),delete e.itemsToRank),r.default.sdk.callHashType){case"widget":e.optsKey=t;break;case"both":e.optsKey=t.toString()+"_"+o.default.hashOpts(e.opts);break;case"opts":default:e.optsKey=o.default.hashOpts(e.opts||{})}return u.default.fetchData.fetchQueue.push(e),r.default.debug&&console.debug("Registered obj: ",e),!0},fetch:function(e){var t=(new Date).getTime(),n=o.default.getNowOrTime();u.default.fetchCalled=!0,u.default.fetchData.started=!0,u.default.fetchData.recsFetched=!1,u.default.fetchData.finalized=!1,r.default.sdk.multiFetch&&(u.default.fetchData.dedupQueue={}),u.default.fetchData.startTime=o.default.getTime(),u.default.fetchData.timeout=e&&e.timeout||u.default.fetchData.timeout,e&&e.callback&&"function"==typeof e.callback&&(u.default.fetchData.callback=e.callback),u.default.fetchData.fetchQueue&&u.default.fetchData.fetchQueue.length>0&&(r.default.sdk.enableBackup?g.setTimeout(k,2500):g.setTimeout(T,u.default.fetchData.timeout),r.default.sdk.retry&&g.setTimeout(v,4300));var i=a.default.getWidgetData(),s={},l={};for(var d in r.default.sdk.flipQueue&&(u.default.fetchData.fetchQueue=u.default.fetchData.fetchQueue.reverse()),u.default.fetchData.fetchQueue.forEach(function(e){var r=s[e.optsKey]||{dedupGroups:{},max:0,fetchInfo:{}},a=(i.widgets||{})[e.widget]||{},o=e.dedupGid||a.dedupGid||"0";o&&(l[o]=(l[o]||0)+(e.max||0),r.dedupGroups[o]=!0),r.max=Math.max(r.max,e.max),r.fetchInfo[e.widget]=e.max,r.opts=e.opts||{},r.dedupGid=e.dedupGid,r.fetchStartTime=t,r.fetchStartTimeRelative=n,s[e.optsKey]=r}),u.default.fetchData.calls=s,u.default.fetchData.dedupMax=l,r.default.sdk.timerBufferShown&&(u.default.buffer.shown={}),s)w(d,r.default.sdk.queryServer);return!0},userCallback:y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDiagnostics=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(17));t.RenderDiagnostics=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.useDiagnostics=t,this.diagnostics={widgets:{}}}return r(e,[{key:"addWidget",value:function(e){this.useDiagnostics&&(this.diagnostics.widgets[e]={status:"success",name:e,warnings:[]})}},{key:"widgetInfo",value:function(e,t){var n=this;this.useDiagnostics&&Object.keys(t).forEach(function(r){n.diagnostics.widgets[e]||(n.diagnostics.widgets[e]={name:e,status:"success",warnings:[]}),n.diagnostics.widgets[e][r]=t[r]})}},{key:"addWarning",value:function(e,t){this.useDiagnostics&&this.diagnostics.widgets[e].warnings.push(t)}},{key:"sendDiagnostic",value:function(e){this.useDiagnostics&&i.default.sendWidgetDiagnostic(this.diagnostics.widgets[e])}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(5));t.default={isConsoleReferrer:function(){return"console"==r.default.getUrlParameter(document.referrer,"li-view-mode")},isConsoleChild:function(){return"li-child"==window.name||"li-child-nf"==window.name},setStateToConsoleMode:function(){var e=r.default.updateUrlParameter(window.location.href,"li-view-mode","console");history.replaceState(history.state,document.title,e),window.name="li-child"}}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=s(n(59)),i=s(n(21)),a=s(n(0)),o=(s(n(4)),s(n(27)),s(n(9)),s(n(8)));s(n(3)),s(n(19)),s(n(11)),s(n(15)),s(n(10)),s(n(5)),s(n(6)),s(n(20)),s(n(14)),s(n(2)),s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}document,window;o.default.addEarlyExtension("l9ehhrb6mtv75bp2",{run:function(){a.default.knownBadActorRegex=/robsgolaf.cf|tahmbayan.tk|www.superstatic.org|fanyi.myyoudao.com|sfatheco.ga/,a.default.sdk.queryApiVersion="v3";var e=function(e){var t="fandom.com";try{t=e.split("/")[2].split(".").slice(-2).join(".")}catch(e){}var n=e;if("wikia.com"==t)n=e.replace("https://","http://");return n};a.default.activity.canonicalUrlTransform=e,a.default.trackingTransURL=e,a.default.globalTracking=!0}});o.default.addWidgetData("l9ehhrb6mtv75bp2",{widgets:{"wikia-rail":{dedupGid:"0"},"wikia-impactfooter":{dedupGid:"0"},"wikia-footer-wiki-rec":{dedupGid:"1"}}}),o.default.addExtension("l9ehhrb6mtv75bp2",{run:function(){a.default.shown.freqCap=2,a.default.inventory.version=3,a.default.sdk.multiFetch=!0,a.default.activity.itemRegex="(?:[?#]|$)",a.default.activity.excludeRegex="(answers.wikia.com|pecial:|Talk:|User:|Template:|Category:|_Wiki|Main_Page|Marvel_Database|:Search|peciale:|pecjalna:|/Narutopedia)",a.default.inventory.itemRegex="(http://.+.wikia.com/wiki/.+?|http://fandom.wikia.com/(?:articles|videos|curated)/.+?|https://.+.fandom.com/wiki/.+?)(?:[?#]|$)",a.default.inventory.excludeRegex="(pecial:|Talk:|User:|Template:|Category:|answers.wikia.com)",a.default.inventory.filters=[{name:"noIndex",value:"true"}]}}),i.default.start(r.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={exportable:{includeInventoryRegex:"(http://.+.wikia.com/wiki/.+?|http://fandom.wikia.com/.+?|https://.+.fandom.com/wiki/.+?)(?:[?#]|$)"}}}]);